
/*
 * This file is part of TheMovieGuide App
 * Copyright (c) 2018
 * All rights reserved.
 */

"use strict";var CommonUIHorizontalRulerWidget = function() {CaveUILayerWidget.call(this);this.widgetColor = null;this.color = null;};CommonUIHorizontalRulerWidget.prototype = (function(o) { function F() {}; F.prototype = o; return(new F()); }) (CaveUILayerWidget.prototype);var P = CommonUIHorizontalRulerWidget.prototype;P.constructor = CommonUIHorizontalRulerWidget;P._t = {"CommonUIHorizontalRulerWidget" : true,"CaveUILayerWidget" : true,"CaveUIContainerWidget" : true,"CaveUIParentAwareWidget" : true,"CaveUIWidgetWithLayout" : true,"CaveUIWidget" : true,"CaveUIHeightAwareWidget" : true};CommonUIHorizontalRulerWidget.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUIHorizontalRulerWidget"] === true);};CommonUIHorizontalRulerWidget.NEW = function() {var v = new CommonUIHorizontalRulerWidget();return(v.CTOR());};P.CTOR = function() {if(CaveUILayerWidget.prototype.CTOR.call(this) == null) {return(null);}return(this);};CommonUIHorizontalRulerWidget.NEWWithGuiApplicationContext = function(ctx) {var v = new CommonUIHorizontalRulerWidget();return(v.CTORWithGuiApplicationContext(ctx));};P.CTORWithGuiApplicationContext = function(ctx) {this.color = null;this.widgetColor = null;if(CaveUILayerWidget.prototype.CTORWithGuiApplicationContext.call(this, ctx) == null) {return(null);}this.forceCreateWidget();return(this);};P.initializeWidget = function() {CaveUILayerWidget.prototype.initializeWidget.call(this);if(this.widgetColor != null) {this.color.setWidgetColor(this.widgetColor);}};P.setWidgetHeight = function(h) {this.setWidgetHeightRequest(h);return(this);};P.createWidget = function() {CaveUILayerWidget.prototype.createWidget.call(this);var thisWidget = this;this.setWidgetHeightRequest(this.context.getHeightValue("1px"));this.color = CaveUICanvasWidget.NEWWithGuiApplicationContext(this.context);this.color.setWidgetColor(CaveColor.forRGBADouble(1.0, 1.0, 1.0, 0.05));this.addWidget(this.color);};P.getWidgetColor = function() {return(this.widgetColor);};P.setWidgetColor = function(v) {this.widgetColor = v;return(this);};var CommonUIMovieContainerWidget = function() {CaveUIResponsiveWidget.call(this);this.castProfilesVector = null;this.isNarrow = null;this.backImage = null;this.layer = null;this.title = null;this.vbox = null;this.overview = null;this.castLayer = null;this.castContainer = null;this.blackContainer = null;};CommonUIMovieContainerWidget.prototype = (function(o) { function F() {}; F.prototype = o; return(new F()); }) (CaveUIResponsiveWidget.prototype);var P = CommonUIMovieContainerWidget.prototype;P.constructor = CommonUIMovieContainerWidget;P._t = {"CommonUIMovieContainerWidget" : true,"CaveUITitledWidget" : true,"CaveUIResponsiveAwareWidget" : true,"CaveUIResponsiveWidget" : true,"CaveUILayerWidget" : true,"CaveUIContainerWidget" : true,"CaveUIParentAwareWidget" : true,"CaveUIWidgetWithLayout" : true,"CaveUIWidget" : true,"CaveUIHeightAwareWidget" : true,"CaveUIResizeAwareWidget" : true};CommonUIMovieContainerWidget.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUIMovieContainerWidget"] === true);};CommonUIMovieContainerWidget.NEW = function() {var v = new CommonUIMovieContainerWidget();return(v.CTOR());};P.CTOR = function() {if(CaveUIResponsiveWidget.prototype.CTOR.call(this) == null) {return(null);}return(this);};CommonUIMovieContainerWidget.NEWWithGuiApplicationContext = function(ctx) {var v = new CommonUIMovieContainerWidget();return(v.CTORWithGuiApplicationContext(ctx));};P.CTORWithGuiApplicationContext = function(ctx) {this.blackContainer = null;this.castContainer = null;this.castLayer = null;this.overview = null;this.vbox = null;this.title = null;this.layer = null;this.backImage = null;this.isNarrow = false;this.castProfilesVector = null;if(CaveUIResponsiveWidget.prototype.CTORWithGuiApplicationContext.call(this, ctx) == null) {return(null);}this.forceCreateWidget();this.castProfilesVector = new Array();return(this);};P.getWidgetTitle = function() {return("The Movie Guide");};P.setWidgetData = function(data) {if(!(data != null)) {return(null);}this.title.setWidgetText(data.getString("title", null));this.overview.setWidgetText(data.getString("overview", null));this.backImage.setWidgetImageUrlWithStringAndFunctionVoidCapeError(TmdbApiAPIClient.getInstance().getImageURL(data.getString("backdrop_path", null)), null);if(!(!this.isNarrow)) {return(null);}TmdbApiAPIClient.getInstance().getCreditsForMovie(data.getString("id", null), function(response, error){if(!(response != null)) {return;}var casts = response.getDynamicVector("cast");if(!(casts != null)) {return;}var castsVector = casts.toVectorOfDynamicMaps();if(!(castsVector != null)) {return;}for(var x = 0 ; x < 5 ; x++) {var castData = castsVector[x];if(!(castData != null)) {continue;}var castProfile = CommonUIMovieContainerWidget.CastProfileWidget.NEWWithGuiApplicationContext(this.context).setWidgetData(castData);this.castProfilesVector.push(castProfile);this.castContainer.addWidgetWithWidgetAndDouble(castProfile, 1.0);}}.bind(this));return(this);};P.doWideLayout = function() {this.isNarrow = false;};P.doNarrowLayout = function() {this.isNarrow = true;this.layer.setWidgetMargin(this.context.getHeightValue("1mm"));this.vbox.setWidgetMargin(this.context.getHeightValue("1mm"));this.title.setWidgetFontSize(this.context.getStylePixels("movie", "largeFont"));this.overview.setWidgetFontSize(this.context.getStylePixels("movie", "largeFont"));CaveUIWidget.removeFromParent(this.blackContainer);CaveUIWidget.removeFromParent(this.castLayer);};P.createWidget = function() {CaveUIResponsiveWidget.prototype.createWidget.call(this);var thisWidget = this;var widget = CommonUIPageContainerWidget.NEWWithGuiApplicationContext(this.context);widget.setWidgetFullScreen(true);this.backImage = CaveUIWebImageWidget.NEWWithGuiApplicationContext(this.context);this.backImage.setWidgetImageScaleMethod(CaveUIImageWidget.FILL);widget.addWidget(this.backImage);var widget2 = CaveUIVerticalScrollerWidget.NEWWithGuiApplicationContext(this.context);var widget3 = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);var widget4 = CaveUICanvasWidget.NEWWithGuiApplicationContext(this.context);widget4.setWidgetColor(CaveColor.forRGBADouble(0, 0, 0, 0.5));widget3.addWidget(widget4);this.layer = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);this.layer.setWidgetMargin(this.context.getHeightValue("20mm"));var widget5 = CaveUIVerticalBoxWidget.NEWWithGuiApplicationContext(this.context);this.title = CaveUILabelWidget.NEWWithGuiApplicationContext(this.context);this.title.setWidgetFontSize(this.context.getStylePixels("movie", "bigFont"));this.title.setWidgetFontBold(true);widget5.addWidget(this.title);var widget6 = CaveUIHorizontalBoxWidget.NEWWithGuiApplicationContext(this.context);this.vbox = CaveUIVerticalBoxWidget.NEWWithGuiApplicationContext(this.context);this.vbox.setWidgetSpacing(this.context.getStylePixels("movie", "spacing"));this.vbox.setWidgetMargin(this.context.getStylePixels("movie", "margin"));this.overview = CaveUILabelWidget.NEWWithGuiApplicationContext(this.context);this.overview.setWidgetFontSize(this.context.getStylePixels("movie", "largeFont"));this.vbox.addWidget(this.overview);this.castLayer = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);this.castLayer.setWidgetMarginTop(this.context.getStylePixels("movie", "margin"));var widget7 = CaveUIVerticalBoxWidget.NEWWithGuiApplicationContext(this.context);widget7.setWidgetSpacing(this.context.getStylePixels("movie", "spacing"));var widget8 = CaveUILabelWidget.NEWWithGuiApplicationContext(this.context);widget8.setWidgetText("Cast");widget8.setWidgetFontSize(this.context.getStylePixels("movie", "largestFont"));widget8.setWidgetFontBold(true);widget7.addWidget(widget8);this.castContainer = CaveUIHorizontalBoxWidget.NEWWithGuiApplicationContext(this.context);this.castContainer.setWidgetSpacing(this.context.getStylePixels("movie", "spacing"));widget7.addWidget(this.castContainer);this.castLayer.addWidget(widget7);this.vbox.addWidget(this.castLayer);widget6.addWidgetWithWidgetAndDouble(this.vbox, 1.0);this.blackContainer = CaveUIContainerWidget.NEWWithGuiApplicationContext(this.context);widget6.addWidgetWithWidgetAndDouble(this.blackContainer, 0.5);widget5.addWidget(widget6);this.layer.addWidget(widget5);widget3.addWidget(this.layer);widget2.addWidget(widget3);widget.addWidget(widget2);this.addWidget(widget);};var P2 = P;CommonUIMovieContainerWidget.CastProfileWidget = function() {CaveUILayerWidget.call(this);this.image = null;this.character = null;this.name = null;};CommonUIMovieContainerWidget.CastProfileWidget.prototype = (function(o) { function F() {}; F.prototype = o; return(new F()); }) (CaveUILayerWidget.prototype);var P = CommonUIMovieContainerWidget.CastProfileWidget.prototype;P.constructor = CommonUIMovieContainerWidget.CastProfileWidget;P._t = {"CommonUIMovieContainerWidget.CastProfileWidget" : true,"CaveUILayerWidget" : true,"CaveUIContainerWidget" : true,"CaveUIParentAwareWidget" : true,"CaveUIWidgetWithLayout" : true,"CaveUIWidget" : true,"CaveUIHeightAwareWidget" : true};CommonUIMovieContainerWidget.CastProfileWidget.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUIMovieContainerWidget.CastProfileWidget"] === true);};CommonUIMovieContainerWidget.CastProfileWidget.NEW = function() {var v = new CommonUIMovieContainerWidget.CastProfileWidget();return(v.CTOR());};P.CTOR = function() {if(CaveUILayerWidget.prototype.CTOR.call(this) == null) {return(null);}return(this);};CommonUIMovieContainerWidget.CastProfileWidget.NEWWithGuiApplicationContext = function(ctx) {var v = new CommonUIMovieContainerWidget.CastProfileWidget();return(v.CTORWithGuiApplicationContext(ctx));};P.CTORWithGuiApplicationContext = function(ctx) {this.name = null;this.character = null;this.image = null;if(CaveUILayerWidget.prototype.CTORWithGuiApplicationContext.call(this, ctx) == null) {return(null);}this.forceCreateWidget();return(this);};P.setWidgetData = function(data) {if(!(data != null)) {return(null);}this.character.setWidgetText(data.getString("character", null));this.name.setWidgetText(data.getString("name", null));this.image.setWidgetImageUrlWithStringAndFunctionVoidCapeError(TmdbApiAPIClient.getInstance().getImageURL(data.getString("profile_path", null)), null);return(this);};P.createWidget = function() {CaveUILayerWidget.prototype.createWidget.call(this);var thisWidget = this;var widget = CaveUICanvasWidget.NEWWithGuiApplicationContext(this.context);widget.setWidgetColor(CaveColor.white());this.addWidget(widget);var widget2 = CaveUIVerticalBoxWidget.NEWWithGuiApplicationContext(this.context);widget2.setWidgetSpacing(this.context.getStylePixels("movie", "spacing"));var widget3 = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);widget3.setWidgetWidthRequest(this.context.getHeightValue("25mm"));widget3.setWidgetHeightRequest(this.context.getHeightValue("35mm"));this.image = CaveUIWebImageWidget.NEWWithGuiApplicationContext(this.context);this.image.setWidgetImageScaleMethod(CaveUIImageWidget.FILL);widget3.addWidget(this.image);widget2.addWidget(widget3);this.character = CaveUILabelWidget.NEWWithGuiApplicationContext(this.context);this.character.setWidgetFontSize(this.context.getStylePixels("movie", "mediumFont"));this.character.setWidgetTextAlign(CaveUILabelWidget.ALIGN_CENTER);this.character.setWidgetTextColor(CaveColor.black());widget2.addWidget(this.character);this.name = CaveUILabelWidget.NEWWithGuiApplicationContext(this.context);this.name.setWidgetFontSize(this.context.getStylePixels("movie", "mediumFont"));this.name.setWidgetTextAlign(CaveUILabelWidget.ALIGN_CENTER);this.name.setWidgetTextColor(CaveColor.black());widget2.addWidget(this.name);this.addWidget(widget2);};P = P2;P2 = null;var CommonUIMovieItemWidget = function() {CaveUILayerWidget.call(this);this.movieData = null;this.image = null;};CommonUIMovieItemWidget.prototype = (function(o) { function F() {}; F.prototype = o; return(new F()); }) (CaveUILayerWidget.prototype);var P = CommonUIMovieItemWidget.prototype;P.constructor = CommonUIMovieItemWidget;P._t = {"CommonUIMovieItemWidget" : true,"CaveUILayerWidget" : true,"CaveUIContainerWidget" : true,"CaveUIParentAwareWidget" : true,"CaveUIWidgetWithLayout" : true,"CaveUIWidget" : true,"CaveUIHeightAwareWidget" : true};CommonUIMovieItemWidget.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUIMovieItemWidget"] === true);};CommonUIMovieItemWidget.NEW = function() {var v = new CommonUIMovieItemWidget();return(v.CTOR());};P.CTOR = function() {if(CaveUILayerWidget.prototype.CTOR.call(this) == null) {return(null);}return(this);};CommonUIMovieItemWidget.NEWWithGuiApplicationContext = function(ctx) {var v = new CommonUIMovieItemWidget();return(v.CTORWithGuiApplicationContext(ctx));};P.CTORWithGuiApplicationContext = function(ctx) {this.image = null;this.movieData = null;if(CaveUILayerWidget.prototype.CTORWithGuiApplicationContext.call(this, ctx) == null) {return(null);}this.forceCreateWidget();return(this);};P.initializeWidget = function() {CaveUILayerWidget.prototype.initializeWidget.call(this);var thisWidget = this;CaveUIWidget.setWidgetClickHandler(this, function(){CaveUINavigationWidget.pushToContainer(thisWidget, CommonUIMovieContainerWidget.NEWWithGuiApplicationContext(this.context).setWidgetData(this.movieData));}.bind(this));};P.setWidgetData = function(data) {if(!(data != null)) {return(null);}this.movieData = data;this.image.setWidgetImageUrlWithStringAndFunctionVoidCapeError(TmdbApiAPIClient.getInstance().getImageURL(data.getString("poster_path", null)), null);return(this);};P.createWidget = function() {CaveUILayerWidget.prototype.createWidget.call(this);var thisWidget = this;var widget = CaveUICanvasWidget.NEWWithGuiApplicationContext(this.context);widget.setWidgetColor(CaveColor.white());this.addWidget(widget);this.image = CaveUIWebImageWidget.NEWWithGuiApplicationContext(this.context);this.image.setWidgetImageScaleMethod(CaveUIImageWidget.STRETCH);this.addWidget(this.image);};var CommonUIPageContainerWidget = function() {CaveUIResponsiveWidget.call(this);this.created = null;this.titleLabel = null;this.fullScreen = null;this.headerLayer = null;this.align = null;this.titleLabel = null;this.container = null;this.githubLogo = null;this.tmdbLogo = null;};CommonUIPageContainerWidget.prototype = (function(o) { function F() {}; F.prototype = o; return(new F()); }) (CaveUIResponsiveWidget.prototype);var P = CommonUIPageContainerWidget.prototype;P.constructor = CommonUIPageContainerWidget;P._t = {"CommonUIPageContainerWidget" : true,"CaveUIResponsiveAwareWidget" : true,"CaveUIResponsiveWidget" : true,"CaveUILayerWidget" : true,"CaveUIContainerWidget" : true,"CaveUIParentAwareWidget" : true,"CaveUIWidgetWithLayout" : true,"CaveUIWidget" : true,"CaveUIHeightAwareWidget" : true,"CaveUIResizeAwareWidget" : true};CommonUIPageContainerWidget.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUIPageContainerWidget"] === true);};CommonUIPageContainerWidget.NEW = function() {var v = new CommonUIPageContainerWidget();return(v.CTOR());};P.CTOR = function() {if(CaveUIResponsiveWidget.prototype.CTOR.call(this) == null) {return(null);}return(this);};CommonUIPageContainerWidget.NEWWithGuiApplicationContext = function(ctx) {var v = new CommonUIPageContainerWidget();return(v.CTORWithGuiApplicationContext(ctx));};P.CTORWithGuiApplicationContext = function(ctx) {this.tmdbLogo = null;this.githubLogo = null;this.container = null;this.titleLabel = null;this.align = null;this.headerLayer = null;this.fullScreen = false;this.titleLabel = null;this.created = false;if(CaveUIResponsiveWidget.prototype.CTORWithGuiApplicationContext.call(this, ctx) == null) {return(null);}this.forceCreateWidget();this.created = true;return(this);};P.initializeWidget = function() {CaveUIResponsiveWidget.prototype.initializeWidget.call(this);CaveUIWidget.setWidgetClickHandler(this.tmdbLogo, function(){this.onLinkClick("https://www.themoviedb.org/?language=en");}.bind(this));CaveUIWidget.setWidgetClickHandler(this.githubLogo, function(){this.onLinkClick("https://github.com/ortegarenzy");}.bind(this));};P.onLinkClick = function(link) {window.open(link, "_blank");};P.setWidgetTitle = function(title) {if(!(this.titleLabel != null)) {return(null);}this.titleLabel.setWidgetText(title);return(this);};P.setWidgetFullScreen = function(v) {if(!v) {return(null);}this.fullScreen = v;CaveUIWidget.removeFromParent(this.headerLayer);this.container.setWidgetMargin(0);return(this);};P.addWidget = function(w) {if(this.container != null && this.created) {CaveUIWidget.addChild(this.container, w);return(this);}return(CaveUIResponsiveWidget.prototype.addWidget.call(this, w));};P.doWideLayout = function() {this.headerLayer.setWidgetHeightRequest(this.context.getHeightValue("30mm"));this.align.setWidgetMarginLeft(this.context.getHeightValue("20mm"));this.align.setWidgetMarginRight(this.context.getHeightValue("20mm"));if(!this.fullScreen) {this.container.setWidgetMarginLeft(this.context.getHeightValue("20mm"));this.container.setWidgetMarginRight(this.context.getHeightValue("20mm"));}this.titleLabel.setWidgetFontSize(this.context.getStylePixels("movie", "titleFont"));};P.doNarrowLayout = function() {this.headerLayer.setWidgetHeightRequest(this.context.getHeightValue("15mm"));this.align.setWidgetMarginLeft(this.context.getHeightValue("3mm"));this.align.setWidgetMarginRight(this.context.getHeightValue("2mm"));if(!this.fullScreen) {this.container.setWidgetMarginLeft(this.context.getHeightValue("2mm"));this.container.setWidgetMarginRight(this.context.getHeightValue("2mm"));}this.titleLabel.setWidgetFontSize(this.context.getStylePixels("movie", "largestFont"));};P.createWidget = function() {CaveUIResponsiveWidget.prototype.createWidget.call(this);var thisWidget = this;var widget = CaveUIVerticalScrollerWidget.NEWWithGuiApplicationContext(this.context);widget.setWidgetScrollBarDisabled(true);var widget2 = CaveUIVerticalBoxWidget.NEWWithGuiApplicationContext(this.context);this.headerLayer = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);this.headerLayer.setWidgetHeightRequest(this.context.getHeightValue("30mm"));var widget3 = CaveUICanvasWidget.NEWWithGuiApplicationContext(this.context);widget3.setWidgetColor(this.context.getStyleColor("movie", "headerBackgroundColor"));this.headerLayer.addWidget(widget3);this.align = CaveUIAlignWidget.NEWWithGuiApplicationContext(this.context);this.align.setWidgetMarginLeft(this.context.getHeightValue("20mm"));this.align.setWidgetMarginRight(this.context.getHeightValue("20mm"));this.titleLabel = CaveUILabelWidget.NEWWithGuiApplicationContext(this.context);this.titleLabel.setWidgetFontSize(this.context.getStylePixels("movie", "titleFont"));this.align.addWidgetWithWidgetAndDoubleAndDoubleAndBoolean(this.titleLabel, 0.0, 0.5, false);this.headerLayer.addWidget(this.align);widget2.addWidget(this.headerLayer);this.container = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);this.container.setWidgetMarginTop(this.context.getStylePixels("movie", "margin"));this.container.setWidgetMarginLeft(this.context.getHeightValue("20mm"));this.container.setWidgetMarginRight(this.context.getHeightValue("20mm"));widget2.addWidgetWithWidgetAndDouble(this.container, 1.0);var widget4 = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);widget4.setWidgetHeightRequest(this.context.getHeightValue("15mm"));var widget5 = CaveUICanvasWidget.NEWWithGuiApplicationContext(this.context);widget5.setWidgetColor(this.context.getStyleColor("movie", "headerBackgroundColor"));widget4.addWidget(widget5);var widget6 = CaveUIHorizontalBoxWidget.NEWWithGuiApplicationContext(this.context);widget6.setWidgetMargin(this.context.getStylePixels("movie", "margin"));var widget7 = CaveUIAlignWidget.NEWWithGuiApplicationContext(this.context);var widget8 = CaveUILabelWidget.NEWWithGuiApplicationContext(this.context);widget8.setWidgetText("&copy; 2018 Designed and Developed by Renzy Ortega");widget8.setWidgetFontBold(true);widget7.addWidgetWithWidgetAndDoubleAndDoubleAndBoolean(widget8, 0.0, 0.5, false);widget6.addWidgetWithWidgetAndDouble(widget7, 1.0);var widget9 = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);widget9.setWidgetMargin(this.context.getStylePixels("movie", "margin"));this.githubLogo = CaveUIImageWidget.NEWWithGuiApplicationContext(this.context);this.githubLogo.setWidgetImageScaleMethod(CaveUIImageWidget.FIT);this.githubLogo.setWidgetImageWidth(this.context.getHeightValue("6mm"));this.githubLogo.setWidgetImageHeight(this.context.getHeightValue("6mm"));this.githubLogo.setWidgetImageResource("github");widget9.addWidget(this.githubLogo);widget6.addWidget(widget9);this.tmdbLogo = CaveUIImageWidget.NEWWithGuiApplicationContext(this.context);this.tmdbLogo.setWidgetImageScaleMethod(CaveUIImageWidget.FIT);this.tmdbLogo.setWidgetImageWidth(this.context.getHeightValue("20mm"));this.tmdbLogo.setWidgetImageHeight(this.context.getHeightValue("20mm"));this.tmdbLogo.setWidgetImageResource("powered-by-tmdb");widget6.addWidget(this.tmdbLogo);widget4.addWidget(widget6);widget2.addWidget(widget4);widget.addWidget(widget2);this.addWidget(widget);};var CommonUIPopupManager = function() {};var P = CommonUIPopupManager.prototype;CommonUIPopupManager.context = null;CommonUIPopupManager.parent = null;CommonUIPopupManager.container = null;P._t = {"CommonUIPopupManager" : true};CommonUIPopupManager.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUIPopupManager"] === true);};CommonUIPopupManager.NEW = function() {var v = new CommonUIPopupManager();return(v.CTOR());};P.CTOR = function() {return(this);};CommonUIPopupManager.initialize = function(ctx, parentWidget) {CommonUIPopupManager.context = ctx;CommonUIPopupManager.parent = parentWidget;};CommonUIPopupManager.showBelow = function(w, widgetBelow) {if(!(w != null)) {return;}if(!(widgetBelow != null)) {return;}var widget = w;var parentLayer = null;var div = CaveHTMLDOM.createElement("div");CaveHTMLDOM.setStyle(div, "position", "fixed");CaveHTMLDOM.setStyle(div, "bottom", "0px");CaveHTMLDOM.setStyle(div, "top", "0px");CaveHTMLDOM.setStyle(div, "left", "0px");CaveHTMLDOM.setStyle(div, "right", "0px");CaveHTMLDOM.setStyle(div, "width", "100%");CaveHTMLDOM.setStyle(div, "height", "100%");CaveHTMLDOM.setStyle(div, "z-index", "999");CaveHTMLDOM.appendToBody(div);parentLayer = CaveUILayerWidget.NEWWithGuiApplicationContext(CommonUIPopupManager.context);CaveUIWidget.addToDomElement(parentLayer, div);var vbox = CaveUIVerticalBoxWidget.forContext(CommonUIPopupManager.context, 0, 0);vbox.addWidget(widgetBelow);CommonUIPopupManager.container = CommonUIPopupManager.MyContainer.NEWWithGuiApplicationContext(CommonUIPopupManager.context);CommonUIPopupManager.container.setWidget(widget);CommonUIPopupManager.container.addWidget(vbox);var layer = CaveUILayerWidget.forWidget(CommonUIPopupManager.context, CommonUIPopupManager.container, 0);parentLayer.addWidget(layer);var close = function(){CommonUIPopupManager.closePopup();}.bind(this);if((CaveUIContainerWidget.IS_INSTANCE && CaveUIContainerWidget.IS_INSTANCE(parentLayer))) {parentLayer.togglePointerEventHandling(true);}parentLayer.element.addEventListener("click", function(e) {if((e.target == this.element) && (this.element.contains(e.target))) {close();}}.bind(parentLayer));var body = document.getElementsByTagName("body")[0];body.addEventListener("scroll", function(e) {console.log("-SCROLL-");});var animationDestY = CaveUIWidget.getAbsoluteY(widget);var ay = CommonUIPopupManager.context.getHeightValue("3mm");CaveUIWidget.move(vbox, CaveUIWidget.getAbsoluteX(widget), (animationDestY + ay));};CommonUIPopupManager.closePopup = function() {var anim = CaveUIWidgetAnimation.forDuration(CommonUIPopupManager.context, 300);anim.addFadeOut(CommonUIPopupManager.container, false);var parent = CaveHTMLDOM.getParentElement(CaveHTMLDOM.getParentElement(CaveHTMLDOM.getParentElement(CommonUIPopupManager.container.element)));anim.setEndListener(function(){CaveHTMLDOM.remove(parent);}.bind(this));anim.start();};var P2 = P;CommonUIPopupManager.MyContainer = function() {CaveUIContainerWidget.call(this);this.widget = null;};CommonUIPopupManager.MyContainer.prototype = (function(o) { function F() {}; F.prototype = o; return(new F()); }) (CaveUIContainerWidget.prototype);var P = CommonUIPopupManager.MyContainer.prototype;P.constructor = CommonUIPopupManager.MyContainer;P._t = {"CommonUIPopupManager.MyContainer" : true,"CaveUIContainerWidget" : true,"CaveUIParentAwareWidget" : true,"CaveUIWidgetWithLayout" : true,"CaveUIWidget" : true,"CaveUIHeightAwareWidget" : true};CommonUIPopupManager.MyContainer.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUIPopupManager.MyContainer"] === true);};CommonUIPopupManager.MyContainer.NEW = function() {var v = new CommonUIPopupManager.MyContainer();return(v.CTOR());};P.CTOR = function() {if(CaveUIContainerWidget.prototype.CTOR.call(this) == null) {return(null);}return(this);};CommonUIPopupManager.MyContainer.NEWWithGuiApplicationContext = function(ctx) {var v = new CommonUIPopupManager.MyContainer();return(v.CTORWithGuiApplicationContext(ctx));};P.CTORWithGuiApplicationContext = function(ctx) {this.widget = null;if(CaveUIContainerWidget.prototype.CTORWithGuiApplicationContext.call(this, ctx) == null) {return(null);}return(this);};P.onWidgetHeightChanged = function(height) {var array = CaveUIWidget.getChildren(this);if(array != null) {var n = 0;var m = array.length;for(n = 0 ; n < m ; n++) {var child = array[n];if(child != null) {CaveUIWidget.move(child, CaveUIWidget.getAbsoluteX(this.widget), CaveUIWidget.getAbsoluteY(this.widget));}}}};P.computeWidgetLayout = function(widthConstraint) {var w = widthConstraint;var array = CaveUIWidget.getChildren(this);if(array != null) {var n = 0;var m = array.length;for(n = 0 ; n < m ; n++) {var child = array[n];if(child != null) {CaveUIWidget.layout(child, w, false);CaveUIWidget.move(child, CaveUIWidget.getAbsoluteX(this.widget), CaveUIWidget.getAbsoluteY(this.widget));}}}CaveUIWidget.setLayoutSize(this, widthConstraint, CaveUIWidget.getHeight(this));};P.getWidget = function() {return(this.widget);};P.setWidget = function(v) {this.widget = v;return(this);};P = P2;P2 = null;var CommonUISearchBoxWidget = function() {CaveUILayerWidget.call(this);this.widgetOnEnterKeyPressed = null;this.input = null;};CommonUISearchBoxWidget.prototype = (function(o) { function F() {}; F.prototype = o; return(new F()); }) (CaveUILayerWidget.prototype);var P = CommonUISearchBoxWidget.prototype;P.constructor = CommonUISearchBoxWidget;P._t = {"CommonUISearchBoxWidget" : true,"CaveUILayerWidget" : true,"CaveUIContainerWidget" : true,"CaveUIParentAwareWidget" : true,"CaveUIWidgetWithLayout" : true,"CaveUIWidget" : true,"CaveUIHeightAwareWidget" : true};CommonUISearchBoxWidget.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUISearchBoxWidget"] === true);};CommonUISearchBoxWidget.NEW = function() {var v = new CommonUISearchBoxWidget();return(v.CTOR());};P.CTOR = function() {if(CaveUILayerWidget.prototype.CTOR.call(this) == null) {return(null);}return(this);};CommonUISearchBoxWidget.NEWWithGuiApplicationContext = function(ctx) {var v = new CommonUISearchBoxWidget();return(v.CTORWithGuiApplicationContext(ctx));};P.CTORWithGuiApplicationContext = function(ctx) {this.input = null;this.widgetOnEnterKeyPressed = null;if(CaveUILayerWidget.prototype.CTORWithGuiApplicationContext.call(this, ctx) == null) {return(null);}this.forceCreateWidget();return(this);};P.onEnterKeyPressed = function() {if(!(this.widgetOnEnterKeyPressed != null)) {return;}this.widgetOnEnterKeyPressed(this.input.getWidgetText());};P.createWidget = function() {CaveUILayerWidget.prototype.createWidget.call(this);var thisWidget = this;this.setWidgetHeightRequest(this.context.getHeightValue("6mm"));this.setWidgetWidthRequest(this.context.getHeightValue("50mm"));var widget = CaveUICanvasWidget.NEWWithGuiApplicationContext(this.context);widget.setWidgetColor(this.context.getStyleColor("movie", "actionBarBackgroundColor"));this.addWidget(widget);var widget2 = CaveUIVerticalBoxWidget.NEWWithGuiApplicationContext(this.context);var widget3 = CommonUIHorizontalRulerWidget.NEWWithGuiApplicationContext(this.context);widget2.addWidget(widget3);var widget4 = CaveUILayerWidget.NEWWithGuiApplicationContext(this.context);widget4.setWidgetMarginLeft(this.context.getStylePixels("movie", "margin") * 2);this.input = CaveUITextInputWidget.NEWWithGuiApplicationContext(this.context);this.input.setWidgetPaddingWithSignedInteger(0);this.input.setWidgetBackgroundColor(this.context.getStyleColor("movie", "actionBarBackgroundColor"));this.input.setWidgetTextColor(this.context.getStyleColor("movie", "textColor"));this.input.setWidgetFontSize(this.context.getStylePixels("movie", "extraLargeFont"));this.input.setWidgetPlaceholder("Search ...");this.input.setWidgetOnEnterKeyPressed(function(){this.onEnterKeyPressed();}.bind(this));widget4.addWidget(this.input);widget2.addWidgetWithWidgetAndDouble(widget4, 1.0);this.addWidget(widget2);};P.getWidgetOnEnterKeyPressed = function() {return(this.widgetOnEnterKeyPressed);};P.setWidgetOnEnterKeyPressed = function(v) {this.widgetOnEnterKeyPressed = v;return(this);};var CommonUITheme = function() {};var P = CommonUITheme.prototype;P._t = {"CommonUITheme" : true};CommonUITheme.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CommonUITheme"] === true);};CommonUITheme.NEW = function() {var v = new CommonUITheme();return(v.CTOR());};P.CTOR = function() {return(this);};CommonUITheme.initialize = function(ctx) {if(!(ctx != null)) {return(false);}var context = ctx;var bigFont = "12mm";var titleFont = "8mm";var largestFont = "4000um";var extraLargeFont = "3500um";var largeFont = "3200um";var mediumFont = "2400um";var smallFont = "1900um";var extraSmallFont = "1500um";var padding = "2200um";var margin = "2000um";var spacing = "1500um";var roundingRadius = "3000um";context.setStyle("movie", ((function(o) {var m = new Map();for(var k in o) {if(o.hasOwnProperty(k)) {m.set(k, o[k]);}}return(m);})({"spacing" : spacing,"margin" : margin,"padding" : padding,"extraSmallFont" : extraSmallFont,"smallFont" : smallFont,"mediumFont" : mediumFont,"largeFont" : largeFont,"largestFont" : largestFont,"extraLargeFont" : extraLargeFont,"roundingRadius" : roundingRadius,"bigFont" : bigFont,"titleFont" : titleFont,"white" : CaveColor.white(),"backgroundColor" : CaveColor.instance("#262728"),"actionBarBackgroundColor" : CaveColor.instance("#262728"),"textColor" : CaveColor.instance("#aaabac"),"headerBackgroundColor" : CaveColor.instance("#1d1e1f"),"outlineWidth" : "1px"})));context.setStyle("LabelWidget", ((function(o) {var m = new Map();for(var k in o) {if(o.hasOwnProperty(k)) {m.set(k, o[k]);}}return(m);})({"textColor" : context.getStyleColor("movie", "textColor"),"fontSize" : context.getStyleString("movie", "mediumFont"),"fontFamily" : "Helvetica"})));context.setStyle("TextInputWidget", ((function(o) {var m = new Map();for(var k in o) {if(o.hasOwnProperty(k)) {m.set(k, o[k]);}}return(m);})({"fontFamily" : "Helvetica"})));CapeLog.debug(context, "Movie App theme initialized");return(true);};