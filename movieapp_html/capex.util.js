
/*
 * This file is part of Jkop
 * Copyright (c) 2016-2018 Job and Esther Technologies Oy
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

"use strict";var CapexUtilDynamicModule = function() {};var P = CapexUtilDynamicModule.prototype;P._t = {"CapexUtilDynamicModule" : true};CapexUtilDynamicModule.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilDynamicModule"] === true);};CapexUtilDynamicModule.NEW = function() {var v = new CapexUtilDynamicModule();return(v.CTOR());};P.CTOR = function() {return(this);};CapexUtilDynamicModule.forFile = function(ctx, file) {var v = CapexUtilDynamicModule.NEW();if(v.loadFile(ctx, file) === false) {v = null;}return(v);};CapexUtilDynamicModule.forObject = function(ctx, oo) {if(!(oo != null)) {return(null);}console.log("[capex.util.DynamicModule.forObject] (DynamicModule.sling:67:2): Not implemented.");return(null);};CapexUtilDynamicModule.isModuleFile = function(ctx, file) {if(!(file != null)) {return(false);}return(false);};P.getModuleDescription = function() {return("builtin");};P.loadFile = function(ctx, file) {if(!(file != null)) {ctx.logError("DynamicModule" + ": Null file");return(false);}if(!file.isFile()) {ctx.logError("DynamicModule" + ": Not a file: `" + (file.getPath()) + "'");return(false);}ctx.logDebug("Loading dynamic module: `" + (file.getPath()) + "'");console.log("[capex.util.DynamicModule.loadFile] (DynamicModule.sling:137:2): Not implemented.");return(false);};P.executeStaticMethod = function(ctx, entityName, methodName, params) {console.log("[capex.util.DynamicModule.executeStaticMethod] (DynamicModule.sling:200:2): Not implemented.");return(false);};P.createObject = function(ctx, className) {console.log("[capex.util.DynamicModule.createObject] (DynamicModule.sling:268:2): Not implemented.");return(null);};var CapexUtilMagicNumberRegistry = function() {this.entries = null;};var P = CapexUtilMagicNumberRegistry.prototype;CapexUtilMagicNumberRegistry.myInstance = null;P._t = {"CapexUtilMagicNumberRegistry" : true};CapexUtilMagicNumberRegistry.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilMagicNumberRegistry"] === true);};CapexUtilMagicNumberRegistry.instance = function() {if(!(CapexUtilMagicNumberRegistry.myInstance != null)) {CapexUtilMagicNumberRegistry.myInstance = CapexUtilMagicNumberRegistry.NEW();}return(CapexUtilMagicNumberRegistry.myInstance);};CapexUtilMagicNumberRegistry.createUnknown = function() {var v = CapexUtilMagicNumberRegistry.MagicNumberInfo.NEW();v.magic = "";v.description = "Unknown";v.mimeType = "application/unknown";return(v);};CapexUtilMagicNumberRegistry.determineTypeForFile = function(file) {if(!(file != null)) {return(CapexUtilMagicNumberRegistry.createUnknown());}var reader = file.read();if(!(reader != null)) {return(CapexUtilMagicNumberRegistry.createUnknown());}var buffer = new ArrayBuffer(32);var r = reader.read(buffer);reader.close();if(r < 1) {return(CapexUtilMagicNumberRegistry.createUnknown());}if(r < 32) {buffer = CapeBuffer.getSubBuffer(buffer, 0, r, false);}return(CapexUtilMagicNumberRegistry.determineMimeTypeForBuffer(buffer));};CapexUtilMagicNumberRegistry.determineMimeTypeForBuffer = function(buffer) {if(!(buffer != null)) {return(CapexUtilMagicNumberRegistry.createUnknown());}var sz = buffer.byteLength;if(sz < 1) {return(CapexUtilMagicNumberRegistry.createUnknown());}var sb = CapeStringBuilder.NEW();if(sz > 32) {sz = 32;}for(var n = 0 ; n < sz ; n++) {sb.appendString(CapeString.forIntegerHex(CapeBuffer.getByte(buffer, n), 2));}var o = CapexUtilMagicNumberRegistry.instance();var v = o.determineTypeForContentString(sb.toString());if(v == null) {return(CapexUtilMagicNumberRegistry.createUnknown());}var w = CapexUtilMagicNumberRegistry.MagicNumberInfo.NEW();w.magic = v.magic;w.description = v.description;w.mimeType = v.mimeType;if(w.magic == null) {w.magic = "";}if(CapeString.isEmpty(w.description)) {w.description = "Unknown";}if(CapeString.isEmpty(w.mimeType)) {w.mimeType = "application/unknown";}return(w);};CapexUtilMagicNumberRegistry.NEW = function() {var v = new CapexUtilMagicNumberRegistry();return(v.CTOR());};P.CTOR = function() {this.entries = new Array();this.add("EDABEEDB", "RPM package", null);this.add("53503031", "Amazon Kindle Update Package", null);this.add("00000100", "ICO icon", "image/vnd.microsoft.icon");this.add("667479703367", "3GPP and 3GPP2 multimedia files", "video/3gpp");this.add("1F9D", "Compressed file (LZW)", null);this.add("1FA0", "Compressed file (LZH)", null);this.add("425A68", "Compressed file (bzip2)", "application/bzip2");this.add("474946383761", "GIF image", "image/gif");this.add("474946383961", "GIF image", "image/gif");this.add("49492A00100000004352", "Canon RAW image format version 2", "image/x-canon-cr2");this.add("49492A00", "TIFF image (little endian)", "image/tiff");this.add("4D4D002A", "TIFF image (big endian)", "image/tiff");this.add("802A5FD7", "Kodak Cineon Image", "image/x-kodak-cineon");this.add("524E4301", "RNC compressed file", null);this.add("524E4302", "RNC compressed file", null);this.add("53445058", "SMPTE DPX image (big endian)", "image/x-smpte-dpx");this.add("58504453", "SMPTE DPX image (little endian)", "image/x-smpte-dpx");this.add("762F3101", "OpenEXR image", "image/x-openexr");this.add("425047FB", "Better Portable Graphics format", "image/x-bpg");this.add("FFD8FFDB", "JPEG image", "image/jpeg");this.add("FFD8FFE0....4A4649460001", "JPEG image", "image/jpeg");this.add("FFD8FFE1....457869660000", "JPEG image", "image/jpeg");this.add("4C5A4950", "LZIP compressed file", null);this.add("4D5A", "EXE executable file", "application/x-exe");this.add("504B0304", "ZIP compressed file", "application/zip");this.add("504B0506", "ZIP compressed file", "application/zip");this.add("504B0708", "ZIP compressed file", "application/zip");this.add("526172211A0700", "RAR compressed file (version 1.50 onwards)", "application/x-rar");this.add("526172211A070100", "RAR compressed file (version 5.0 onwards)", "application/x-rar");this.add("7F454C46", "ELF binary", "application/x-elf");this.add("89504E470D0A1A0A", "PNG image", "application/png");this.add("CAFEBABE", "Java CLASS file", "application/x-java-class");this.add("FEEDFACE", "Mach-O binary (32 bit)", "application/x-mach-o-binary");this.add("FEEDFACF", "Mach-O binary (64 bit)", "application/x-mach-o-binary");this.add("CEFAEDFE", "Mach-O binary (32 bit)", "application/x-mach-o-binary");this.add("CFFAEDFE", "Mach-O binary (64 bit)", "application/x-mach-o-binary");this.add("25215053", "Postscript document", "application/postscript");this.add("25504446", "PDF document", "application/pdf");this.add("3026B2758E66CF11A6D900AA0062CE6C", "Advanced Streaming Format", "video/x-ms-asf");this.add("2453444930303031", "System Deployment Image", null);this.add("4F676753", "OGG media", "application/ogg");this.add("38425053", "Photoshop document (PSD)", "application/psd");this.add("52494646........57415645", "Waveform (WAV) audio", "audio/wav");this.add("52494646........41564920", "Audio video interleave (AVI) video", "video/avi");this.add("FFFB", "MP3 audio", "audio/mp3");this.add("494433", "MP3 audio", "audio/mp3");this.add("424D", "BMP bitmap", "image/bmp");this.add("4344303031", "ISO image", "application/x-iso9660-image");this.add("664C6143", "Free Lossless Audio Codec (FLAC)", "audio/flac");this.add("4D546864", "MIDI sound", "audio/midi");this.add("D0CF11E0A1B11AE1", "Compound file format", null);this.add("6465780A30333500", "Dalvix executable (dex)", "application/x-dex");this.add("4B444d", "VMDK", "application/x-vmdk");this.add("43723234", "Google Chrome extension", "application/x-chrome-extension");this.add("41474433", "FreeHand 8 document", "application/x-freehand8");this.add("05070000424F424F0507000000000000000000000001", "AppleWorks 5 document", "application/x-appleworks5");this.add("0607E100424F424F0607E10000000000000000000001", "AppleWorkd 6 document", "application/x-appleworks6");this.add("455202000000", "Roxio Toast disc image or DMG", null);this.add("8B455202000000", "Roxio Toast disc image or DMG", null);this.add("7801730D626260", "Apple Disk Image (DMG)", "application/x-dmg");this.add("78617221", "Extensible Archive Format (XAR)", "application/x-xar");this.add("504D4F43434D4F43", "Windows Files and Settings Transfer Repository", null);this.add("4E45531A", "Nintendo Entertainment System (NES) ROM", null);this.add("7573746172003030", "TAR archive", "application/tar");this.add("7573746172202000", "TAR archive", "application/tar");this.add("746F7833", "Open source portable voxel file", null);this.add("4D4C5649", "Magic Lantern Video", "application/x-mlv");this.add("44434D0150413330", "Windows Update Binary Delta Compression", null);this.add("377ABCAF271C", "7ZIP archive", "application/7zip");this.add("1F8B", "GZIP archive", "application/gzip");this.add("FD377A585A0000", "XZ archive", "application/xz");this.add("04224D18", "LZ4 Frame Format", null);this.add("4D534346", "Microsoft Cabinet (CAB)", "application/cab");this.add("535A444488F02733", "Microsoft Quantum Compressed", null);this.add("464C4946", "Free Lossless Image Format", "image/flif");this.add("1A45DFA3", "Matroska Media Container", "video/mkv");this.add("41542654464F524D........444A56", "DjVu Document", "application/djvu");this.add("3082", "DER encoded X.509 certificate", null);this.add("4449434D", "DICOM Medical File Format", null);this.add("774F4646", "WOFF File Format 1.0", "application/x-woff-1");this.add("774F4632", "WOFF File Format 2.0", "application/x-woff-2");this.add("3C3F786D6C20", "XML", "text/xml");this.add("0061736D", "WebAssembly Binary Format", "application/wasm");this.add("CF8401", "Lepton Compressed JPEG Image", "image/x-lepton");this.add("435753", "Flash SWF", "application/swf");this.add("465753", "Flash SWF", "application/swf");this.add("213C617263683E", "Linux DEB File", "application/x-deb");this.add("52494646........57454250", "Google WebP Image", "image/webp");this.add("27051956", "U-Boot uImage", "application/x-uimage");this.add("7B5C72746631", "Rich Text Format (RTF)", "text/rtf");this.add("54415045", "Microsoft Tape Format", null);this.add("47", "MPEG Video", "video/mpeg");this.add("000001BA", "MPEG Video", "video/mpeg");this.add("000001B3", "MPEG Video", "video/mpeg");this.add("7801", "Zlib Compression (low compression)", "application/x-zlib");this.add("789C", "Zlib Compression (default compression)", "application/x-zlib");this.add("78DA", "Zlib Compression (best compression)", "application/x-zlib");return(this);};P.isEntryMatching = function(entry, str) {if(!(str != null)) {return(false);}if(!(entry != null)) {return(false);}if(!(entry.magic != null)) {return(false);}var sit = CapeString.iterate(str);if(!(sit != null)) {return(false);}var mit = CapeString.iterate(entry.magic);if(!(mit != null)) {return(false);}while(true) {var sc = sit.getNextChar();var mc = mit.getNextChar();if(mc.charCodeAt() < 1) {break;}if(mc === '.') {continue;}if(sc === mc) {continue;}return(false);}return(true);};P.determineTypeForContentString = function(str) {if(!(str != null)) {return(null);}if(this.entries != null) {var n = 0;var m = this.entries.length;for(n = 0 ; n < m ; n++) {var entry = this.entries[n];if(entry != null) {if(this.isEntryMatching(entry, str)) {return(entry);}}}}return(null);};P.add = function(ident, description, mimeType) {if(!(ident != null)) {return;}var v = CapexUtilMagicNumberRegistry.MagicNumberInfo.NEW();v.magic = ident;v.description = description;v.mimeType = mimeType;this.entries.push(v);};var P2 = P;CapexUtilMagicNumberRegistry.MagicNumberInfo = function() {this.magic = null;this.description = null;this.mimeType = null;};var P = CapexUtilMagicNumberRegistry.MagicNumberInfo.prototype;P._t = {"CapexUtilMagicNumberRegistry.MagicNumberInfo" : true};CapexUtilMagicNumberRegistry.MagicNumberInfo.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilMagicNumberRegistry.MagicNumberInfo"] === true);};CapexUtilMagicNumberRegistry.MagicNumberInfo.NEW = function() {var v = new CapexUtilMagicNumberRegistry.MagicNumberInfo();return(v.CTOR());};P.CTOR = function() {this.mimeType = null;this.description = null;this.magic = null;return(this);};P = P2;P2 = null;var CapexUtilMatrix33 = function() {this.v = null;};var P = CapexUtilMatrix33.prototype;P._t = {"CapexUtilMatrix33" : true};CapexUtilMatrix33.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilMatrix33"] === true);};CapexUtilMatrix33.NEW = function() {var v = new CapexUtilMatrix33();return(v.CTOR());};P.CTOR = function() {this.v = [];return(this);};CapexUtilMatrix33.forZero = function() {return(CapexUtilMatrix33.forValues([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]));};CapexUtilMatrix33.forIdentity = function() {return(CapexUtilMatrix33.forValues([1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix33.invertMatrix = function(m) {var d = m.v[0] * m.v[4] * m.v[8] + m.v[3] * m.v[7] * m.v[2] + m.v[6] * m.v[1] * m.v[5] - m.v[0] * m.v[7] * m.v[5] - m.v[3] * m.v[1] * m.v[8] - m.v[6] * m.v[4] * m.v[2];var v = CapexUtilMatrix33.NEW();v.v[0] = (m.v[4] * m.v[8] - m.v[7] * m.v[5]) / d;v.v[3] = (m.v[6] * m.v[5] - m.v[3] * m.v[8]) / d;v.v[6] = (m.v[3] * m.v[7] - m.v[6] * m.v[4]) / d;v.v[1] = (m.v[7] * m.v[2] - m.v[1] * m.v[8]) / d;v.v[4] = (m.v[0] * m.v[8] - m.v[6] * m.v[2]) / d;v.v[7] = (m.v[6] * m.v[1] - m.v[0] * m.v[7]) / d;v.v[2] = (m.v[1] * m.v[5] - m.v[4] * m.v[2]) / d;v.v[5] = (m.v[3] * m.v[2] - m.v[0] * m.v[5]) / d;v.v[8] = (m.v[0] * m.v[4] - m.v[3] * m.v[1]) / d;return(v);};CapexUtilMatrix33.forTranslate = function(translateX, translateY) {return(CapexUtilMatrix33.forValues([1.0, 0.0, translateX, 0.0, 1.0, translateY, 0.0, 0.0, 1.0]));};CapexUtilMatrix33.forRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexUtilMatrix33.forValues([c, s, 0.0, -s, c, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix33.forRotationWithCenter = function(angle, centerX, centerY) {var translate = CapexUtilMatrix33.forTranslate(centerX, centerY);var rotate = CapexUtilMatrix33.forRotation(angle);var translateBack = CapexUtilMatrix33.forTranslate(-centerX, -centerY);var translatedRotated = CapexUtilMatrix33.multiplyMatrix(translate, rotate);return(CapexUtilMatrix33.multiplyMatrix(translatedRotated, translateBack));};CapexUtilMatrix33.forSkew = function(skewX, skewY) {return(CapexUtilMatrix33.forValues([1.0, skewX, 0.0, skewY, 1.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix33.forScale = function(scaleX, scaleY) {return(CapexUtilMatrix33.forValues([scaleX, 0.0, 0.0, 0.0, scaleY, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix33.forFlip = function(flipX, flipY) {var xmat33 = CapexUtilMatrix33.forValues([1.0, 0.0, 0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 1.0]);var ymat33 = CapexUtilMatrix33.forValues([-1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]);if(flipX && flipY) {return(CapexUtilMatrix33.multiplyMatrix(xmat33, ymat33));}else if(flipX) {return(xmat33);}else if(flipY) {return(ymat33);}return(CapexUtilMatrix33.forIdentity());};CapexUtilMatrix33.forValues = function(mv) {var v = CapexUtilMatrix33.NEW();var i = 0;for(i = 0 ; i < 9 ; i++) {if(i >= mv.length) {v.v[i] = 0.0;}else {v.v[i] = mv[i];}}return(v);};CapexUtilMatrix33.multiplyScalar = function(v, mm) {var mat33 = CapexUtilMatrix33.forZero();mat33.v[0] = mm.v[0] * v;mat33.v[1] = mm.v[1] * v;mat33.v[2] = mm.v[2] * v;mat33.v[3] = mm.v[3] * v;mat33.v[4] = mm.v[4] * v;mat33.v[5] = mm.v[5] * v;mat33.v[6] = mm.v[6] * v;mat33.v[7] = mm.v[7] * v;mat33.v[8] = mm.v[8] * v;return(mat33);};CapexUtilMatrix33.multiplyMatrix = function(a, b) {var matrix33 = CapexUtilMatrix33.NEW();matrix33.v[0] = a.v[0] * b.v[0] + a.v[1] * b.v[3] + a.v[2] * b.v[6];matrix33.v[1] = a.v[0] * b.v[1] + a.v[1] * b.v[4] + a.v[2] * b.v[7];matrix33.v[2] = a.v[0] * b.v[2] + a.v[1] * b.v[5] + a.v[2] * b.v[8];matrix33.v[3] = a.v[3] * b.v[0] + a.v[4] * b.v[3] + a.v[5] * b.v[6];matrix33.v[4] = a.v[3] * b.v[1] + a.v[4] * b.v[4] + a.v[5] * b.v[7];matrix33.v[5] = a.v[3] * b.v[2] + a.v[4] * b.v[5] + a.v[5] * b.v[8];matrix33.v[6] = a.v[6] * b.v[0] + a.v[7] * b.v[3] + a.v[8] * b.v[6];matrix33.v[7] = a.v[6] * b.v[1] + a.v[7] * b.v[4] + a.v[8] * b.v[7];matrix33.v[8] = a.v[6] * b.v[2] + a.v[7] * b.v[5] + a.v[8] * b.v[8];return(matrix33);};CapexUtilMatrix33.multiplyVector = function(a, b) {var x = a.v[0] * b.x + a.v[1] * b.y + a.v[2] * 1.0;var y = a.v[3] * b.x + a.v[4] * b.y + a.v[5] * 1.0;return(CapexUtilVector2.create(x, y));};var CapexUtilMatrix44 = function() {this.v = null;};var P = CapexUtilMatrix44.prototype;P._t = {"CapexUtilMatrix44" : true};CapexUtilMatrix44.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilMatrix44"] === true);};CapexUtilMatrix44.NEW = function() {var v = new CapexUtilMatrix44();return(v.CTOR());};P.CTOR = function() {this.v = [];return(this);};CapexUtilMatrix44.forZero = function() {return(CapexUtilMatrix44.forValues([0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]));};CapexUtilMatrix44.forIdentity = function() {return(CapexUtilMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix44.forTranslate = function(translateX, translateY, translateZ) {return(CapexUtilMatrix44.forValues([1.0, 0.0, 0.0, translateX, 0.0, 1.0, 0.0, translateY, 0.0, 0.0, 1.0, translateZ, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix44.forXRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexUtilMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, c, -s, 0.0, 0.0, s, c, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix44.forYRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexUtilMatrix44.forValues([c, 0.0, s, 0.0, 0.0, 1.0, 0.0, 0.0, -s, 0.0, c, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix44.forZRotation = function(angle) {var c = CapeMath.cos(angle);var s = CapeMath.sin(angle);return(CapexUtilMatrix44.forValues([c, -s, 0.0, 0.0, s, c, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix44.forSkew = function(vx, vy, vz) {return(CapexUtilMatrix44.forValues([1.0, vx, vx, 0.0, vy, 1.0, vy, 0.0, vz, vz, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix44.forXRotationWithCenter = function(angle, centerX, centerY, centerZ) {var translate = CapexUtilMatrix44.forTranslate(centerX, centerY, centerZ);var rotate = CapexUtilMatrix44.forXRotation(angle);var translateBack = CapexUtilMatrix44.forTranslate(-centerX, -centerY, -centerZ);var translatedRotated = CapexUtilMatrix44.multiplyMatrix(translate, rotate);return(CapexUtilMatrix44.multiplyMatrix(translatedRotated, translateBack));};CapexUtilMatrix44.forYRotationWithCenter = function(angle, centerX, centerY, centerZ) {var translate = CapexUtilMatrix44.forTranslate(centerX, centerY, centerZ);var rotate = CapexUtilMatrix44.forYRotation(angle);var translateBack = CapexUtilMatrix44.forTranslate(-centerX, -centerY, -centerZ);var translatedRotated = CapexUtilMatrix44.multiplyMatrix(translate, rotate);return(CapexUtilMatrix44.multiplyMatrix(translatedRotated, translateBack));};CapexUtilMatrix44.forZRotationWithCenter = function(angle, centerX, centerY, centerZ) {var translate = CapexUtilMatrix44.forTranslate(centerX, centerY, centerZ);var rotate = CapexUtilMatrix44.forZRotation(angle);var translateBack = CapexUtilMatrix44.forTranslate(-centerX, -centerY, -centerZ);var translatedRotated = CapexUtilMatrix44.multiplyMatrix(translate, rotate);return(CapexUtilMatrix44.multiplyMatrix(translatedRotated, translateBack));};CapexUtilMatrix44.forScale = function(scaleX, scaleY, scaleZ) {return(CapexUtilMatrix44.forValues([scaleX, 0.0, 0.0, 0.0, 0.0, scaleY, 0.0, 0.0, 0.0, 0.0, scaleZ, 0.0, 0.0, 0.0, 0.0, 1.0]));};CapexUtilMatrix44.forFlipXY = function(flipXY) {if(flipXY) {return(CapexUtilMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));}return(CapexUtilMatrix44.forIdentity());};CapexUtilMatrix44.forFlipXZ = function(flipXZ) {if(flipXZ) {return(CapexUtilMatrix44.forValues([1.0, 0.0, 0.0, 0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));}return(CapexUtilMatrix44.forIdentity());};CapexUtilMatrix44.forFlipYZ = function(flipYZ) {if(flipYZ) {return(CapexUtilMatrix44.forValues([-1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0]));}return(CapexUtilMatrix44.forIdentity());};CapexUtilMatrix44.forValues = function(mv) {var v = CapexUtilMatrix44.NEW();var i = 0;for(i = 0 ; i < 16 ; i++) {if(i >= mv.length) {v.v[i] = 0.0;}else {v.v[i] = mv[i];}}return(v);};CapexUtilMatrix44.multiplyScalar = function(v, mm) {return(CapexUtilMatrix44.forValues([mm.v[0] * v, mm.v[1] * v, mm.v[2] * v, mm.v[3] * v, mm.v[4] * v, mm.v[5] * v, mm.v[6] * v, mm.v[7] * v, mm.v[8] * v, mm.v[9] * v, mm.v[10] * v, mm.v[11] * v, mm.v[12] * v, mm.v[3] * v, mm.v[14] * v, mm.v[15] * v]));};CapexUtilMatrix44.multiplyMatrix = function(a, b) {var matrix44 = CapexUtilMatrix44.NEW();matrix44.v[0] = a.v[0] * b.v[0] + a.v[1] * b.v[4] + a.v[2] * b.v[8] + a.v[3] * b.v[12];matrix44.v[1] = a.v[0] * b.v[1] + a.v[1] * b.v[5] + a.v[2] * b.v[9] + a.v[3] * b.v[13];matrix44.v[2] = a.v[0] * b.v[2] + a.v[1] * b.v[6] + a.v[2] * b.v[10] + a.v[3] * b.v[14];matrix44.v[3] = a.v[0] * b.v[3] + a.v[1] * b.v[7] + a.v[2] * b.v[11] + a.v[3] * b.v[15];matrix44.v[4] = a.v[4] * b.v[0] + a.v[5] * b.v[4] + a.v[6] * b.v[8] + a.v[7] * b.v[12];matrix44.v[5] = a.v[4] * b.v[1] + a.v[5] * b.v[5] + a.v[6] * b.v[9] + a.v[7] * b.v[13];matrix44.v[6] = a.v[4] * b.v[2] + a.v[5] * b.v[6] + a.v[6] * b.v[10] + a.v[7] * b.v[14];matrix44.v[7] = a.v[4] * b.v[3] + a.v[5] * b.v[7] + a.v[6] * b.v[11] + a.v[7] * b.v[15];matrix44.v[8] = a.v[8] * b.v[0] + a.v[9] * b.v[4] + a.v[10] * b.v[8] + a.v[11] * b.v[12];matrix44.v[9] = a.v[8] * b.v[1] + a.v[9] * b.v[5] + a.v[10] * b.v[9] + a.v[11] * b.v[13];matrix44.v[10] = a.v[8] * b.v[2] + a.v[9] * b.v[6] + a.v[10] * b.v[10] + a.v[11] * b.v[14];matrix44.v[11] = a.v[8] * b.v[3] + a.v[9] * b.v[7] + a.v[10] * b.v[11] + a.v[11] * b.v[15];matrix44.v[12] = a.v[12] * b.v[0] + a.v[13] * b.v[4] + a.v[14] * b.v[8] + a.v[15] * b.v[12];matrix44.v[13] = a.v[12] * b.v[1] + a.v[13] * b.v[5] + a.v[14] * b.v[9] + a.v[15] * b.v[13];matrix44.v[14] = a.v[12] * b.v[2] + a.v[13] * b.v[6] + a.v[14] * b.v[10] + a.v[15] * b.v[14];matrix44.v[15] = a.v[12] * b.v[3] + a.v[13] * b.v[7] + a.v[14] * b.v[11] + a.v[15] * b.v[15];return(matrix44);};CapexUtilMatrix44.multiplyVector = function(a, b) {var x = a.v[0] * b.x + a.v[1] * b.y + a.v[2] * b.z + a.v[3] * 1.0;var y = a.v[4] * b.x + a.v[5] * b.y + a.v[6] * b.z + a.v[7] * 1.0;var z = a.v[8] * b.x + a.v[9] * b.y + a.v[10] * b.z + a.v[11] * 1.0;return(CapexUtilVector3.create(x, y, z));};var CapexUtilMimeTypeRegistry = function() {};var P = CapexUtilMimeTypeRegistry.prototype;CapexUtilMimeTypeRegistry.myInstance = null;CapexUtilMimeTypeRegistry.htMime = null;CapexUtilMimeTypeRegistry.htExt = null;P._t = {"CapexUtilMimeTypeRegistry" : true};CapexUtilMimeTypeRegistry.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilMimeTypeRegistry"] === true);};CapexUtilMimeTypeRegistry.instance = function() {if(!(CapexUtilMimeTypeRegistry.myInstance != null)) {CapexUtilMimeTypeRegistry.myInstance = CapexUtilMimeTypeRegistry.NEW();}return(CapexUtilMimeTypeRegistry.myInstance);};CapexUtilMimeTypeRegistry.typeForFile = function(f) {return(CapexUtilMimeTypeRegistry.determineTypeForFile(f));};CapexUtilMimeTypeRegistry.determineTypeForFile = function(f) {if(!(f != null)) {return("application/unknown");}var mtr = CapexUtilMimeTypeRegistry.instance();var v = mtr.getMimeType(f.baseName());if(CapeString.isEmpty(v)) {return("application/unknown");}return(v);};CapexUtilMimeTypeRegistry.determineExtensionForMimeType = function(mimeType) {return(CapexUtilMimeTypeRegistry.instance().getExtension(mimeType));};CapexUtilMimeTypeRegistry.NEW = function() {var v = new CapexUtilMimeTypeRegistry();return(v.CTOR());};P.CTOR = function() {CapexUtilMimeTypeRegistry.htMime = new Map();CapexUtilMimeTypeRegistry.htExt = new Map();this.add("*.cpp", "text/x-c++src");this.add("*.ogm", "video/x-ogm+ogg");this.add("*.epsf", "image/x-eps");this.add("*.mpeg", "video/mpeg");this.add("*.rmj", "application/vnd.rn-realmedia");this.add("*.nes", "application/x-nes-rom");this.add("*.rmm", "application/vnd.rn-realmedia");this.add("*.gb", "application/x-gameboy-rom");this.add("*.qtvr", "video/quicktime");this.add("*.ogv", "video/ogg");this.add("*.amr", "audio/AMR");this.add("*.ogx", "application/ogg");this.add("*.rms", "application/vnd.rn-realmedia");this.add("*.gf", "application/x-tex-gf");this.add("*.gg", "application/x-sms-rom");this.add("*.xslt", "application/xml");this.add("*.Z", "application/x-compress");this.add("*.mdb", "application/vnd.ms-access");this.add("*.rmx", "application/vnd.rn-realmedia");this.add("*.anim[1-9j]", "video/x-anim");this.add("*.gp", "application/x-gnuplot");this.add("*.a", "application/x-archive");this.add("*.a", "application/x-shared-library-la");this.add("*.mdi", "image/vnd.ms-modi");this.add("*.c", "text/x-csrc");this.add("*.gv", "text/vnd.graphviz");this.add("*.m3u8", "audio/x-mpegurl");this.add("*.e", "text/x-eiffel");this.add("*.pict1", "image/x-pict");this.add("*.pict2", "image/x-pict");this.add("*.spd", "application/x-font-speedo");this.add("*.spc", "application/x-pkcs7-certificates");this.add("*.gz", "application/x-gzip");this.add("*.dtd", "application/xml-dtd");this.add("*.dvi.gz", "application/x-gzdvi");this.add("*.h", "text/x-chdr");this.add("*.o", "application/x-object");this.add("*.spl", "application/x-shockwave-flash");this.add("*.etheme", "application/x-e-theme");this.add("*.d", "text/x-dsrc");this.add("*.sr2", "image/x-sony-sr2");this.add("*.t", "text/troff");this.add("*.hh", "text/x-c++hdr");this.add("*.m", "text/x-objcsrc");this.add("*.m", "text/x-matlab");this.add("*.ps.bz2", "application/x-bzpostscript");this.add("*.anx", "application/annodex");this.add("*.crt", "application/x-x509-ca-cert");this.add("*.med", "audio/x-mod");this.add("*.crw", "image/x-canon-crw");this.add("*.spx", "audio/ogg");this.add("*.spx", "audio/x-speex");this.add("*.xliff", "application/x-xliff");this.add("*.ani", "application/x-navi-animation");this.add("*.hp", "text/x-c++hdr");this.add("*.vhdl", "text/x-vhdl");this.add("*.f", "text/x-fortran");this.add("*.hs", "text/x-haskell");this.add("*.epub", "application/epub+zip");this.add("*.kar", "audio/midi");this.add("*.mpga", "audio/mpeg");this.add("*.dtx", "text/x-tex");this.add("*.pptx", "application/vnd.openxmlformats-officedocument.presentationml.presentation");this.add("*.dsl", "text/x-dsl");this.add("*.csh", "application/x-csh");this.add("*.nfo", "text/x-nfo");this.add("*.pkr", "application/pgp-keys");this.add("*.epsi.bz2", "image/x-bzeps");this.add("*.spec", "text/x-rpm-spec");this.add("*.f90", "text/x-fortran");this.add("*.sql", "text/x-sql");this.add("*.css", "text/css");this.add("*.f95", "text/x-fortran");this.add("*.csv", "text/csv");this.add("*.epsi", "image/x-eps");this.add("*.tsv", "text/tab-separated-values");this.add("*.pla", "audio/x-iriver-pla");this.add("*.it", "audio/x-it");this.add("*.ape", "audio/x-ape");this.add("*.src", "application/x-wais-source");this.add("*.tta", "audio/x-tta");this.add("*.ttc", "application/x-font-ttf");this.add("*.srf", "image/x-sony-srf");this.add("*.pln", "application/x-planperfect");this.add("*.ttf", "application/x-font-ttf");this.add("*.exe", "application/x-ms-dos-executable");this.add("*.abw.gz", "application/x-abiword");this.add("*.chrt", "application/x-kchart");this.add("*.dvi", "application/x-dvi");this.add("*.rpm", "application/x-rpm");this.add("*.epsf.gz", "image/x-gzeps");this.add("*.pls", "audio/x-scpls");this.add("*.gcrd", "text/directory");this.add("*.t2t", "text/x-txt2tags");this.add("*.srt", "application/x-subrip");this.add("*.exr", "image/x-exr");this.add("*.pntg", "image/x-macpaint");this.add("*.ttx", "application/x-font-ttx");this.add("*.jad", "text/vnd.sun.j2me.app-descriptor");this.add("*.js", "application/javascript");this.add("*.latex", "text/x-tex");this.add("*.jar", "application/x-java-archive");this.add("*.ssa", "text/x-ssa");this.add("*.xspf", "application/xspf+xml");this.add("*.mgp", "application/x-magicpoint");this.add("*.movie", "video/x-sgi-movie");this.add("*.cue", "application/x-cue");this.add("*.html", "text/html");this.add("*.smaf", "application/x-smaf");this.add("*.zabw", "application/x-abiword");this.add("*.dwg", "image/vnd.dwg");this.add("authors", "text/x-authors");this.add("*.msod", "image/x-msod");this.add("*.xslfo", "text/x-xslfo");this.add("*.mrml", "text/x-mrml");this.add("*.kdc", "image/x-kodak-kdc");this.add("*.cur", "image/x-win-bitmap");this.add("*.gnucash", "application/x-gnucash");this.add("*.pkipath", "application/pkix-pkipath");this.add("*.p", "text/x-pascal");this.add("*.patch", "text/x-patch");this.add("*.old", "application/x-trash");this.add("*.m4", "application/x-m4");this.add("*.mbox", "application/mbox");this.add("*.png", "image/png");this.add("*.stc", "application/vnd.sun.xml.calc.template");this.add("*.std", "application/vnd.sun.xml.draw.template");this.add("*.arj", "application/x-arj");this.add("*.pnm", "image/x-portable-anymap");this.add("*.dxf", "image/vnd.dxf");this.add("*.sti", "application/vnd.sun.xml.impress.template");this.add("*.gplt", "application/x-gnuplot");this.add("*.la", "application/x-shared-library-la");this.add("*.stm", "audio/x-stm");this.add("*.pcf.gz", "application/x-font-pcf");this.add("*.kexic", "application/x-kexi-connectiondata");this.add("*.arw", "image/x-sony-arw");this.add("*.mid", "audio/midi");this.add("*.stw", "application/vnd.sun.xml.writer.template");this.add("*.mif", "application/x-mif");this.add("*.sty", "text/x-tex");this.add("*.hpgl", "application/vnd.hp-hpgl");this.add("*.asc", "application/pgp-encrypted");this.add("*.asc", "application/pgp-keys");this.add("*.asc", "text/plain");this.add("*.sub", "text/x-microdvd");this.add("*.sub", "text/x-mpsub");this.add("*.sub", "text/x-subviewer");this.add("*.ly", "text/x-lilypond");this.add("*.lz", "application/x-lzip");this.add("*.kexis", "application/x-kexiproject-shortcut");this.add("*.asf", "video/x-ms-asf");this.add("*.wmls", "text/vnd.wap.wmlscript");this.add("*.s3m", "audio/x-s3m");this.add("*.por", "application/x-spss-por");this.add("*.asp", "application/x-asp");this.add("*.pot", "application/vnd.ms-powerpoint");this.add("*.pot", "text/x-gettext-translation-template");this.add("*.sun", "image/x-sun-raster");this.add("*.ass", "text/x-ssa");this.add("*.rss", "application/rss+xml");this.add("*.lha", "application/x-lha");this.add("*.md", "application/x-genesis-rom");this.add("*.me", "text/x-troff-me");this.add("*.sami", "application/x-sami");this.add("*.asx", "audio/x-ms-asx");this.add("*.mm", "text/x-troff-mm");this.add("*.mo", "application/x-gettext-translation");this.add("CMakeLists.txt", "text/x-cmake");this.add("*.ml", "text/x-ocaml");this.add("*.ms", "text/x-troff-ms");this.add("*.kfo", "application/x-kformula");this.add("*.rtf", "application/rtf");this.add("*.lhs", "text/x-literate-haskell");this.add("*.svg", "image/svg+xml");this.add("*.ppm", "image/x-portable-pixmap");this.add("*.nb", "application/mathematica");this.add("*.lhz", "application/x-lhz");this.add("*.pps", "application/vnd.ms-powerpoint");this.add("*.ppt", "application/vnd.ms-powerpoint");this.add("*.nc", "application/x-netcdf");this.add("*.icb", "image/x-tga");this.add("*.ica", "application/x-ica");this.add("*.mka", "audio/x-matroska");this.add("*.ppz", "application/vnd.ms-powerpoint");this.add("*.txt", "text/plain");this.add("*.rtx", "text/richtext");this.add("*.gedcom", "application/x-gedcom");this.add("*.cxx", "text/x-c++src");this.add("*.ico", "image/vnd.microsoft.icon");this.add("*.metalink", "application/metalink+xml");this.add("*.txz", "application/x-xz-compressed-tar");this.add("*.ics", "text/calendar");this.add("*.p10", "application/pkcs10");this.add("gnumakefile", "text/x-makefile");this.add("*.p12", "application/x-pkcs12");this.add("*.swf", "application/x-shockwave-flash");this.add("*.mkv", "video/x-matroska");this.add("*.idl", "text/x-idl");this.add("*.prc", "application/x-palm-database");this.add("*.mli", "text/x-ocaml");this.add("*.tar.lzo", "application/x-tzo");this.add("*.sxc", "application/vnd.sun.xml.calc");this.add("*.sxd", "application/vnd.sun.xml.draw");this.add("*.cert", "application/x-x509-ca-cert");this.add("*.avi", "video/x-msvideo");this.add("*.sxg", "application/vnd.sun.xml.writer.global");this.add("*.qtl", "application/x-quicktime-media-link");this.add("*.sxi", "application/vnd.sun.xml.impress");this.add("*.xac", "application/x-gnucash");this.add("*.djvu", "image/vnd.djvu");this.add("*.sxm", "application/vnd.sun.xml.math");this.add("winmail.dat", "application/vnd.ms-tnef");this.add("*.bz2", "application/x-bzip");this.add("*.ief", "image/ief");this.add("*.tzo", "application/x-tzo");this.add("*.pk", "application/x-tex-pk");this.add("*.pl", "application/x-perl");this.add("*.rvx", "video/vnd.rn-realvideo");this.add("*.sxw", "application/vnd.sun.xml.writer");this.add("*.php4", "application/x-php");this.add("*.mmf", "application/x-smaf");this.add("*.BLEND", "application/x-blender");this.add("*.kil", "application/x-killustrator");this.add("*.pm", "application/x-perl");this.add("*.ps", "application/postscript");this.add("*.awb", "audio/AMR-WB");this.add("*.psf", "application/x-font-linux-psf");this.add("*.psf", "audio/x-psf");this.add("*.pw", "application/x-pw");this.add("*.aifc", "audio/x-aiff");this.add("*.mml", "text/mathml");this.add("*.psd", "image/vnd.adobe.photoshop");this.add("*.mo3", "audio/x-mo3");this.add("*.aiff", "audio/x-aiff");this.add("*.gba", "application/x-gba-rom");this.add("*.awk", "application/x-awk");this.add("*.not", "text/x-mup");this.add("changelog", "text/x-changelog");this.add("*.sv4cpio", "application/x-sv4cpio");this.add("*%", "application/x-trash");this.add("*.po", "text/x-gettext-translation");this.add("*.hdf", "application/x-hdf");this.add("*.psw", "application/x-pocket-word");this.add("*.tar.bz", "application/x-bzip-compressed-tar");this.add("*.php3", "application/x-php");this.add("*.desktop", "application/x-desktop");this.add("*.fb2", "application/x-fictionbook+xml");this.add("*.wb1", "application/x-quattropro");this.add("*.wb2", "application/x-quattropro");this.add("*.ora", "image/openraster");this.add("*.wb3", "application/x-quattropro");this.add("*.iff", "image/x-iff");this.add("*.mp+", "audio/x-musepack");this.add("*.axa", "audio/annodex");this.add("*.orf", "image/x-olympus-orf");this.add("*.xbm", "image/x-xbitmap");this.add("copying", "text/x-copying");this.add("*.mp2", "audio/mp2");this.add("*.mp2", "video/mpeg");this.add("*.mp3", "audio/mpeg");this.add("*.mp4", "video/mp4");this.add("*.py", "text/x-python");this.add("*.kino", "application/smil");this.add("*.ra", "audio/vnd.rn-realaudio");this.add("*.rb", "application/x-ruby");this.add("*.icns", "image/x-icns");this.add("*.qt", "video/quicktime");this.add("*.xcf", "image/x-xcf");this.add("*.mng", "video/x-mng");this.add("*.xbl", "application/xml");this.add("*.axv", "video/annodex");this.add("*.cpio", "application/x-cpio");this.add("*.rm", "application/vnd.rn-realmedia");this.add("*.mod", "audio/x-mod");this.add("*.sv4crc", "application/x-sv4crc");this.add("*.rp", "image/vnd.rn-realpix");this.add("*.mof", "text/x-mof");this.add("*.wav", "audio/x-wav");this.add("*.rt", "text/vnd.rn-realtext");this.add("*.wax", "audio/x-ms-asx");this.add("*.rv", "video/vnd.rn-realvideo");this.add("*.moc", "text/x-moc");this.add("*.siag", "application/x-siag");this.add("*.pack", "application/x-java-pack200");this.add("*.gnumeric", "application/x-gnumeric");this.add("*.tnef", "application/vnd.ms-tnef");this.add("*.tpic", "image/x-tga");this.add("*.mov", "video/quicktime");this.add("*.smil", "application/smil");this.add("*.sh", "application/x-shellscript");this.add("*.divx", "video/x-msvideo");this.add("*.sk", "image/x-skencil");this.add("*.moov", "video/quicktime");this.add("*.mpc", "audio/x-musepack");this.add("*.so", "application/x-sharedlib");this.add("*.mpe", "video/mpeg");this.add("*.otc", "application/vnd.oasis.opendocument.chart-template");this.add("*.midi", "audio/midi");this.add("*.otf", "application/vnd.oasis.opendocument.formula-template");this.add("*.otf", "application/x-font-otf");this.add("*.otg", "application/vnd.oasis.opendocument.graphics-template");this.add("*.oth", "application/vnd.oasis.opendocument.text-web");this.add("*.mpg", "video/mpeg");this.add("*.mpp", "audio/x-musepack");this.add("*.otp", "application/vnd.oasis.opendocument.presentation-template");this.add("*~", "application/x-trash");this.add("*.ged", "application/x-gedcom");this.add("*.ots", "application/vnd.oasis.opendocument.spreadsheet-template");this.add("*.ott", "application/vnd.oasis.opendocument.text-template");this.add("*.tar.lzma", "application/x-lzma-compressed-tar");this.add("*.docm", "application/vnd.openxmlformats-officedocument.wordprocessingml.document");this.add("makefile", "text/x-makefile");this.add("*.wcm", "application/vnd.ms-works");this.add("*.tk", "text/x-tcl");this.add("*.gen", "application/x-genesis-rom");this.add("*.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document");this.add("*.log", "text/x-log");this.add("*.nsc", "application/x-netshow-channel");this.add("*.egon", "application/x-egon");this.add("*.tr", "text/troff");this.add("*.ts", "application/x-linguist");this.add("*.zip", "application/zip");this.add("*.kml", "application/vnd.google-earth.kml+xml");this.add("*.iptables", "text/x-iptables");this.add("*.m15", "audio/x-mod");this.add("*.wdb", "application/vnd.ms-works");this.add("*.kmz", "application/vnd.google-earth.kmz");this.add("*.shar", "application/x-shar");this.add("*.nsv", "video/x-nsv");this.add("*.texinfo", "text/x-texinfo");this.add("*.so.[0-9].*", "application/x-sharedlib");this.add("*.ui", "application/x-designer");this.add("*.ilbm", "image/x-ilbm");this.add("*.3ds", "image/x-3ds");this.add("*.vbs", "application/x-vbscript");this.add("*.mrl", "text/x-mrml");this.add("*.vcf", "text/directory");this.add("*.mrw", "image/x-minolta-mrw");this.add("*.jpeg", "image/jpeg");this.add("*.3g2", "video/3gpp");this.add("*.dar", "application/x-dar");this.add("*.tar.gz", "application/x-compressed-tar");this.add("*.p7b", "application/x-pkcs7-certificates");this.add("*.lzma", "application/x-lzma");this.add("*.vct", "text/directory");this.add("*.vcs", "text/calendar");this.add("*.msi", "application/x-msi");this.add("*.msi", "application/x-ms-win-installer");this.add("*.psid", "audio/prs.sid");this.add("*.kon", "application/x-kontour");this.add("*.blender", "application/x-blender");this.add("*.pyc", "application/x-python-bytecode");this.add("*.owl", "application/rdf+xml");this.add("*.vda", "image/x-tga");this.add("*.dbf", "application/x-dbf");this.add("*.p7s", "application/pkcs7-signature");this.add("*.pyo", "application/x-python-bytecode");this.add("*.msx", "application/x-msx-rom");this.add("*.epsf.bz2", "image/x-bzeps");this.add("*.cb7", "application/x-cb7");this.add("*.jng", "image/x-jng");this.add("*.texi", "text/x-texinfo");this.add("*.so.[0-9]", "application/x-sharedlib");this.add("*.wp", "application/vnd.wordperfect");this.add("*.kpm", "application/x-kpovmodeler");this.add("*.jp2", "image/jp2");this.add("*.wv", "audio/x-wavpack");this.add("*.cab", "application/vnd.ms-cab-compressed");this.add("*.kpr", "application/x-kpresenter");this.add("*.3ga", "video/3gpp");this.add("*.kpt", "application/x-kpresenter");this.add("*.n64", "application/x-n64-rom");this.add("*.mtm", "audio/x-mod");this.add("*.m2t", "video/mpeg");this.add("*.glade", "application/x-glade");this.add("*.oxt", "application/vnd.openofficeorg.extension");this.add("*.iso9660", "application/x-cd-image");this.add("*.gif", "image/gif");this.add("*.dcm", "application/dicom");this.add("*.ime", "text/x-iMelody");this.add("*.h++", "text/x-c++hdr");this.add("*.3gp", "video/3gpp");this.add("*.tar", "application/x-tar");this.add("*.dcr", "image/x-kodak-dcr");this.add("*.xi", "audio/x-xi");this.add("*.xm", "audio/x-xm");this.add("*.dcl", "text/x-dcl");this.add("*.3gpp", "video/3gpp");this.add("*.kdelnk", "application/x-desktop");this.add("*.vivo", "video/vivo");this.add("*.xz", "application/x-xz");this.add("*.imy", "text/x-iMelody");this.add("*.m3u", "audio/x-mpegurl");this.add("*.mup", "text/x-mup");this.add("*.kra", "application/x-krita");this.add("*.cbr", "application/x-cbr");this.add("*.m4b", "audio/x-m4b");this.add("*.cbt", "application/x-cbt");this.add("*.cpio.gz", "application/x-cpio-compressed");this.add("*.m4a", "audio/mp4");this.add("*.dds", "image/x-dds");this.add("*.jpe", "image/jpeg");this.add("*.jpg", "image/jpeg");this.add("*.cbz", "application/x-cbz");this.add("*.jpc", "image/jp2");this.add("*.tbz", "application/x-bzip-compressed-tar");this.add("*.eps.bz2", "image/x-bzeps");this.add("*.jpf", "image/jp2");this.add("*.k25", "image/x-kodak-k25");this.add("*.jpr", "application/x-jbuilder-project");this.add("*.7z", "application/x-7z-compressed");this.add("*.ins", "text/x-tex");this.add("*.deb", "application/x-deb");this.add("*.ini", "text/plain");this.add("*.psf.gz", "application/x-gz-font-linux-psf");this.add("*.jpx", "application/x-jbuilder-project");this.add("*.jpx", "image/jp2");this.add("*.m4v", "video/mp4");this.add("*.bak", "application/x-trash");this.add("*.rmvb", "application/vnd.rn-realmedia");this.add("gmon.out", "application/x-profile");this.add("*.perl", "application/x-perl");this.add("*.sam", "application/x-amipro");this.add("*.fig", "image/x-xfig");this.add("*.bcpio", "application/x-bcpio");this.add("*.gtar", "application/x-tar");this.add("*.ltx", "text/x-tex");this.add("*.lua", "text/x-lua");this.add("*.der", "application/x-x509-ca-cert");this.add("*.sav", "application/x-spss-sav");this.add("*.wk1", "application/vnd.lotus-1-2-3");this.add("*.tcl", "text/x-tcl");this.add("*.wk3", "application/vnd.lotus-1-2-3");this.add("*.wk4", "application/vnd.lotus-1-2-3");this.add("*.zoo", "application/x-zoo");this.add("*.xcf.gz", "image/x-compressed-xcf");this.add("*.qtif", "image/x-quicktime");this.add("*.oleo", "application/x-oleo");this.add("*.ksp", "application/x-kspread");this.add("*.ps.gz", "application/x-gzpostscript");this.add("*.opml", "text/x-opml+xml");this.add("*.cdf", "application/x-netcdf");this.add("*.vhd", "text/x-vhdl");this.add("*.xla", "application/vnd.ms-excel");this.add("*.inf", "text/plain");this.add("*.xlc", "application/vnd.ms-excel");this.add("*.xld", "application/vnd.ms-excel");this.add("*.xlf", "application/x-xliff");this.add("*.cdr", "application/vnd.corel-draw");this.add("*.xll", "application/vnd.ms-excel");this.add("*.xlm", "application/vnd.ms-excel");this.add("*.602", "application/x-t602");this.add("*.mxf", "application/mxf");this.add("*.xls", "application/vnd.ms-excel");this.add("*.xlt", "application/vnd.ms-excel");this.add("*.aac", "audio/mp4");this.add("*.xlsm", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");this.add("*.xlw", "application/vnd.ms-excel");this.add("*.docbook", "application/docbook+xml");this.add("*.raf", "image/x-fuji-raf");this.add("*.fits", "image/fits");this.add("*.epsi.gz", "image/x-gzeps");this.add("*.xlsx", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");this.add("*.rdfs", "application/rdf+xml");this.add("*.ram", "application/ram");this.add("*.eif", "text/x-eiffel");this.add("*.scm", "text/x-scheme");this.add("*.ac3", "audio/ac3");this.add("*.rar", "application/x-rar");this.add("*.xmf", "audio/x-xmf");this.add("*.ras", "image/x-cmu-raster");this.add("*.cer", "application/x-x509-ca-cert");this.add("*.ldif", "text/x-ldif");this.add("*.kud", "application/x-kugar");this.add("*.rax", "audio/vnd.rn-realaudio");this.add("*.xml", "application/xml");this.add("*.gmo", "application/x-gettext-translation");this.add("*.xmi", "text/x-xmi");this.add("*.CSSL", "text/css");this.add("*.wks", "application/vnd.lotus-1-2-3");this.add("*.wks", "application/vnd.ms-works");this.add("*.tbz2", "application/x-bzip-compressed-tar");this.add("*.tex", "text/x-tex");this.add("*.raw", "image/x-panasonic-raw");this.add("*.sda", "application/vnd.stardivision.draw");this.add("*.sdc", "application/vnd.stardivision.calc");this.add("*.sdd", "application/vnd.stardivision.impress");this.add("*.bdf", "application/x-font-bdf");this.add("*.lwo", "image/x-lwo");this.add("*.lws", "image/x-lws");this.add("*.minipsf", "audio/x-minipsf");this.add("*.flc", "video/x-flic");this.add("*.gnc", "application/x-gnucash");this.add("*.gnd", "application/gnunet-directory");this.add("*.theme", "application/x-theme");this.add("*.sdp", "application/vnd.stardivision.impress");this.add("*.sdp", "application/sdp");this.add("*.fli", "video/x-flic");this.add("install", "text/x-install");this.add("*.sds", "application/vnd.stardivision.chart");this.add("*.abw", "application/x-abiword");this.add("*.j2k", "image/jp2");this.add("core", "application/x-core");this.add("*.sdw", "application/vnd.stardivision.writer");this.add("*.viv", "video/vivo");this.add("*.pdf.gz", "application/x-gzpdf");this.add("*.hpp", "text/x-c++hdr");this.add("*.flv", "video/x-flv");this.add("*.tiff", "image/tiff");this.add("*.flw", "application/x-kivio");this.add("*.ace", "application/x-ace");this.add("*.dvi.bz2", "application/x-bzdvi");this.add("*.dia", "application/x-dia-diagram");this.add("*.pcf.Z", "application/x-font-pcf");this.add("*.gnuplot", "application/x-gnuplot");this.add("*.wma", "audio/x-ms-wma");this.add("*.tga", "image/x-tga");this.add("*.cgm", "image/cgm");this.add("*.wmf", "image/x-wmf");this.add("*.torrent", "application/x-bittorrent");this.add("*.uil", "text/x-uil");this.add("*.vala", "text/x-vala");this.add("*.lwob", "image/x-lwo");this.add("*.kwd", "application/x-kword");this.add("*.wml", "text/vnd.wap.wml");this.add("*.iso", "application/x-cd-image");this.add("*.tgz", "application/x-compressed-tar");this.add("*.adb", "text/x-adasrc");this.add("*.wmv", "video/x-ms-wmv");this.add("*.wmx", "audio/x-ms-asx");this.add("*.rdf", "application/rdf+xml");this.add("*.kwt", "application/x-kword");this.add("*.vlc", "audio/x-mpegurl");this.add("*.lyx", "application/x-lyx");this.add("*.pdf.bz2", "application/x-bzpdf");this.add("*.chm", "application/x-chm");this.add("*.ufraw", "application/x-ufraw");this.add("*.gpg", "application/pgp-encrypted");this.add("*.ads", "text/x-adasrc");this.add("*.tar.Z", "application/x-tarz");this.add("*.xpm", "image/x-xpixmap");this.add("*.djv", "image/vnd.djvu");this.add("*.wp4", "application/vnd.wordperfect");this.add("*.wp5", "application/vnd.wordperfect");this.add("*.wp6", "application/vnd.wordperfect");this.add("*.xps", "application/vnd.ms-xpsdocument");this.add("*.lzh", "application/x-lha");this.add("*.lzo", "application/x-lzop");this.add("*.pak", "application/x-pak");this.add("*.sgf", "application/x-go-sgf");this.add("*.sylk", "text/spreadsheet");this.add("*.tif", "image/tiff");this.add("*.par2", "application/x-par2");this.add("*.sgi", "image/x-sgi");this.add("*.rej", "application/x-reject");this.add("*.sgl", "application/vnd.stardivision.writer");this.add("*.sgm", "text/sgml");this.add("*.xcf.bz2", "image/x-compressed-xcf");this.add("*.reg", "text/x-ms-regedit");this.add("*.pas", "text/x-pascal");this.add("*.emf", "image/x-emf");this.add("*.emp", "application/vnd.emusic-emusic_package");this.add("*.for", "text/x-fortran");this.add("*.pbm", "image/x-portable-bitmap");this.add("*.xbel", "application/x-xbel");this.add("*.gra", "application/x-graphite");this.add("*.afm", "application/x-font-afm");this.add("*.wpd", "application/vnd.wordperfect");this.add("*.shn", "application/x-shorten");this.add("*.wpg", "application/x-wpg");this.add("*.svgz", "image/svg+xml-compressed");this.add("*.cmake", "text/x-cmake");this.add("*.tar.bz2", "application/x-bzip-compressed-tar");this.add("*.wpl", "application/vnd.ms-wpl");this.add("*.dll", "application/x-sharedlib");this.add("*.ult", "audio/x-mod");this.add("*.wpp", "application/vnd.wordperfect");this.add("*.ent", "application/xml-external-parsed-entity");this.add("*.wps", "application/vnd.ms-works");this.add("*.669", "audio/x-mod");this.add("*.jnlp", "application/x-java-jnlp-file");this.add("*.pcf", "application/x-font-pcf");this.add("*.pcf", "application/x-cisco-vpn-settings");this.add("*.pcd", "image/x-photo-cd");this.add("*.bib", "text/x-bibtex");this.add("*.rgb", "image/x-rgb");this.add("*.sid", "audio/prs.sid");this.add("*.pcl", "application/vnd.hp-pcl");this.add("*.c++", "text/x-c++src");this.add("*.htm", "text/html");this.add("*.voc", "audio/x-voc");this.add("*.sik", "application/x-trash");this.add("*.vapi", "text/x-vala");this.add("*.bin", "application/octet-stream");this.add("*.vob", "video/mpeg");this.add("*.gsf", "application/x-font-type1");this.add("*.sk1", "image/x-skencil");this.add("*.ag", "image/x-applix-graphics");this.add("*.ai", "application/illustrator");this.add("*.sis", "application/vnd.symbian.install");this.add("*.sit", "application/x-stuffit");this.add("*.al", "application/x-perl");this.add("*.gsm", "audio/x-gsm");this.add("*.siv", "application/sieve");this.add("*.vor", "application/vnd.stardivision.writer");this.add("*.xsl", "application/xml");this.add("*.diff", "text/x-patch");this.add("*.pdb", "application/x-aportisdoc");this.add("*.pdb", "application/x-palm-database");this.add("*.pdc", "application/x-aportisdoc");this.add("*.as", "application/x-applix-spreadsheet");this.add("*.au", "audio/basic");this.add("*.pdf", "application/pdf");this.add("*.aw", "application/x-applix-word");this.add("*.obj", "application/x-tgif");this.add("*.sgml", "text/sgml");this.add("*.pcx", "image/x-pcx");this.add("*.dng", "image/x-adobe-dng");this.add("*.uni", "audio/x-mod");this.add("*.wbmp", "image/vnd.wap.wbmp");this.add("*.wri", "application/x-mswrite");this.add("*.java", "text/x-java");this.add("*.wrl", "model/vrml");this.add("*.flac", "audio/x-flac");this.add("*.cls", "text/x-tex");this.add("*.eps", "image/x-eps");this.add("*.kexi", "application/x-kexiproject-sqlite2");this.add("*.kexi", "application/x-kexiproject-sqlite3");this.add("*.tlz", "application/x-lzma-compressed-tar");this.add("*.pef", "image/x-pentax-pef");this.add("*.aif", "audio/x-aiff");this.add("*.ocl", "text/x-ocl");this.add("*.class", "application/x-java");this.add("*.doc", "application/msword");this.add("*.pem", "application/x-x509-ca-cert");this.add("*.bz", "application/x-bzip");this.add("makefile", "text/x-makefile");this.add("*.x3f", "image/x-sigma-x3f");this.add("*.cc", "text/x-c++src");this.add("*.skr", "application/pgp-keys");this.add("*.xul", "application/vnd.mozilla.xul+xml");this.add("*.xul", "application/vnd.mozilla.xul+xml");this.add("*.dot", "application/msword-template");this.add("*.dot", "text/vnd.graphviz");this.add("*.oda", "application/oda");this.add("*.odb", "application/vnd.oasis.opendocument.database");this.add("*.odc", "application/vnd.oasis.opendocument.chart");this.add("*.pict", "image/x-pict");this.add("*.pfb", "application/x-font-type1");this.add("*.odf", "application/vnd.oasis.opendocument.formula");this.add("*.odg", "application/vnd.oasis.opendocument.graphics");this.add("*.karbon", "application/x-karbon");this.add("*.odi", "application/vnd.oasis.opendocument.image");this.add("*.hwp", "application/x-hwp");this.add("*.xhtml", "application/xhtml+xml");this.add("*.odm", "application/vnd.oasis.opendocument.text-master");this.add("*.hwt", "application/x-hwt");this.add("credits", "text/x-credits");this.add("*.odp", "application/vnd.oasis.opendocument.presentation");this.add("*.tnf", "application/vnd.ms-tnef");this.add("*.pfa", "application/x-font-type1");this.add("*.ods", "application/vnd.oasis.opendocument.spreadsheet");this.add("*.odt", "application/vnd.oasis.opendocument.text");this.add("*.dc", "application/x-dc-rom");this.add("*.slk", "text/spreadsheet");this.add("*.erl", "text/x-erlang");this.add("*.pfx", "application/x-pkcs12");this.add("*.mab", "application/x-markaby");this.add("*.sisx", "x-epoc/x-sisx-app");this.add("*.ustar", "application/x-ustar");this.add("*.gvp", "text/x-google-video-pointer");this.add("*.dv", "video/dv");this.add("*.man", "application/x-troff-man");this.add("*.qif", "application/x-qw");this.add("*.qif", "image/x-quicktime");this.add("*.smd", "application/vnd.stardivision.mail");this.add("*.toc", "application/x-cdrdao-toc");this.add("*.smf", "application/vnd.stardivision.math");this.add("*.pgm", "image/x-portable-graymap");this.add("*.pgn", "application/x-chess-pgn");this.add("*.smi", "application/smil");this.add("*.smi", "application/x-sami");this.add("*.pgp", "application/pgp-encrypted");this.add("*.cs", "text/x-csharp");this.add("*.cs", "text/x-csharp");this.add("*.sml", "application/smil");this.add("*.smc", "application/x-snes-rom");this.add("*.xwd", "image/x-xwindowdump");this.add("*.bmp", "image/bmp");this.add("*.blend", "application/x-blender");this.add("*.com", "application/x-ms-dos-executable");this.add("*.atom", "application/atom+xml");this.add("*.sms", "application/x-sms-rom");this.add("*.el", "text/x-emacs-lisp");this.add("*.hxx", "text/x-c++hdr");this.add("*.g3", "image/fax-g3");this.add("*.vst", "image/x-tga");this.add("*.es", "application/ecmascript");this.add("*.PAR2", "application/x-par2");this.add("*.eps.gz", "image/x-gzeps");this.add("*.rle", "image/rle");this.add("*.snd", "audio/basic");this.add("*.ez", "application/andrew-inset");this.add("*.psflib", "audio/x-psflib");this.add("*.nds", "application/x-nintendo-ds-rom");this.add("*.php", "application/x-php");this.add("*.wvc", "audio/x-wavpack-correction");this.add("*.123", "application/vnd.lotus-1-2-3");this.add("*.uri", "text/x-uri");this.add("*.url", "text/x-uri");this.add("*.abw.CRASHED", "application/x-abiword");this.add("*.cr2", "image/x-canon-cr2");this.add("*.tar.xz", "application/x-xz-compressed-tar");this.add("*.roff", "text/troff");this.add("*.fl", "application/x-fluid");this.add("*.alz", "application/x-alz");this.add("*.oga", "audio/ogg");this.add("*.wvp", "audio/x-wavpack");this.add("*.nef", "image/x-nikon-nef");this.add("*,v", "text/plain");this.add("*.C", "text/x-c++src");this.add("*.themepack", "application/x-windows-themepack");this.add("*.ogg", "audio/ogg");this.add("*.ogg", "audio/x-vorbis+ogg");this.add("*.ogg", "audio/x-flac+ogg");this.add("*.ogg", "audio/x-speex+ogg");this.add("*.ogg", "video/x-theora+ogg");this.add("*.wvx", "audio/x-ms-asx");this.add("*.fo", "text/x-xslfo");this.add("*.etx", "text/x-setext");this.add("*.pptm", "application/vnd.openxmlformats-officedocument.presentationml.presentation");this.add("readme", "text/x-readme");this.add("todo", "text/x-todo");this.add("license", "text/x-license");this.add("*.version", "text/x-version");this.add("Makefile.*", "text/x-makefile");this.add("*.dmg", "application/x-apple-diskimage");this.add("*.swp", "application/x-igelle-software-package");this.add("*.squashfs", "application/x-igelle-diskimage-squashfs");this.add("*.img", "application/x-igelle-diskimage");this.add("*.eq", "text/x-eqela-src");this.add("*.equity", "text/x-eqela-equity-src");this.add("*.eqic", "text/x-eqela-eqic-config");this.add("*.config", "text/x-config");this.add("*.eqlib", "application/x-eqela-library");this.add("*.eqlibx", "application/x-eqela-library-encrypted");this.add("*.apk", "application/vnd.android.package-archive");this.add("*.eo", "application/x-eqela-object");this.add("*.eo1", "application/x-eqela-object-level-1");this.add("*.eo2", "application/x-eqela-object-level-2");this.add("*.eo3", "application/x-eqela-object-level-3");this.add("*.eo4", "application/x-eqela-object-level-4");this.add("*.eo5", "application/x-eqela-object-level-5");this.add("*.iga", "application/x-igelle-archive");this.add("*.ipa", "application/octet-stream");this.add("*.xap", "application/x-silverlight-app");this.add("*.webapp", "application/x-web-app-manifest+json");this.add("*.json", "application/json");this.add("*.properties", "application/properties");return(this);};P.getMimeType = function(str) {var v = null;if(str != null) {var mime = null;var ld = CapeString.lastIndexOfWithStringAndCharacterAndSignedInteger(str, '.', -1);if(ld >= 0) {mime = CapeString.subStringWithStringAndSignedInteger(str, ld + 1);}v = CapeMap.getMapAndK(CapexUtilMimeTypeRegistry.htMime, CapeString.toLowerCase(mime));}if(v == null || CapeString.getLength(v) < 1) {v = "application/unknown";}return(v);};P.getExtension = function(mimeType) {return(CapeMap.getMapAndK(CapexUtilMimeTypeRegistry.htExt, mimeType));};P.add = function(pattern, mimeType) {var v = false;if(pattern == null || mimeType == null) {;}else if(CapeString.startsWithWithStringAndStringAndSignedInteger(pattern, ".", 0) === true) {var key = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(pattern, 1, CapeString.getLength(pattern) - 1);CapeMap.set(CapexUtilMimeTypeRegistry.htMime, key, mimeType);CapeMap.set(CapexUtilMimeTypeRegistry.htExt, mimeType, key);v = true;}else if(CapeString.startsWithWithStringAndStringAndSignedInteger(pattern, "*.", 0) === true) {var key = CapeString.subStringWithStringAndSignedIntegerAndSignedInteger(pattern, 2, CapeString.getLength(pattern) - 2);CapeMap.set(CapexUtilMimeTypeRegistry.htMime, key, mimeType);CapeMap.set(CapexUtilMimeTypeRegistry.htExt, mimeType, key);v = true;}else if(CapeString.startsWithWithStringAndStringAndSignedInteger(pattern, "#", 0) === true) {;}else {CapeMap.set(CapexUtilMimeTypeRegistry.htMime, pattern, mimeType);CapeMap.set(CapexUtilMimeTypeRegistry.htExt, mimeType, pattern);v = true;}return(v);};P.read = function(file) {if(!(file != null)) {return(false);}var buf = CapePrintReader.forReader(file.read());if(!(buf != null)) {return(false);}var n = 0;while(true) {var line = buf.readLine();if(!(line != null)) {break;}var va = CapeString.split(line, ':', 0);var val = CapeVector.iterate(va);if(val != null) {var front = val.next();var back = val.next();if(front != null) {front = CapeString.strip(front);}if(back != null) {back = CapeString.strip(back);}if(this.add(front, back)) {n++;}}}return(true);};var CapexUtilPaperConfiguration = function() {this.size = null;this.orientation = null;};var P = CapexUtilPaperConfiguration.prototype;P._t = {"CapexUtilPaperConfiguration" : true};CapexUtilPaperConfiguration.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilPaperConfiguration"] === true);};CapexUtilPaperConfiguration.NEW = function() {var v = new CapexUtilPaperConfiguration();return(v.CTOR());};P.CTOR = function() {this.orientation = null;this.size = null;return(this);};CapexUtilPaperConfiguration.forDefault = function() {return(CapexUtilPaperConfiguration.forA4Portrait());};CapexUtilPaperConfiguration.forA4Portrait = function() {var v = CapexUtilPaperConfiguration.NEW();v.setSize(CapexUtilPaperSize.forValue(CapexUtilPaperSize.A4));v.setOrientation(CapexUtilPaperOrientation.forValue(CapexUtilPaperOrientation.PORTRAIT));return(v);};CapexUtilPaperConfiguration.forA4Landscape = function() {var v = CapexUtilPaperConfiguration.NEW();v.setSize(CapexUtilPaperSize.forValue(CapexUtilPaperSize.A4));v.setOrientation(CapexUtilPaperOrientation.forValue(CapexUtilPaperOrientation.LANDSCAPE));return(v);};P.getSizeInches = function() {var sz = this.getRawSizeInches();if(CapexUtilPaperOrientation.matches(this.orientation, CapexUtilPaperOrientation.LANDSCAPE)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(sz.getHeight(), sz.getWidth()));}return(sz);};P.getRawSizeInches = function() {if(CapexUtilPaperSize.matches(this.size, CapexUtilPaperSize.LETTER)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(8.5, 11));}if(CapexUtilPaperSize.matches(this.size, CapexUtilPaperSize.LEGAL)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(8.5, 14));}if(CapexUtilPaperSize.matches(this.size, CapexUtilPaperSize.A3)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(11.7, 16.5));}if(CapexUtilPaperSize.matches(this.size, CapexUtilPaperSize.A4)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(8.27, 11.7));}if(CapexUtilPaperSize.matches(this.size, CapexUtilPaperSize.A5)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(5.8, 8.3));}if(CapexUtilPaperSize.matches(this.size, CapexUtilPaperSize.B4)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(9.8, 13.9));}if(CapexUtilPaperSize.matches(this.size, CapexUtilPaperSize.B5)) {return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(6.9, 9.8));}return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(8.27, 11.7));};P.getSizeDots = function(dpi) {var szi = this.getSizeInches();return(CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble(szi.getWidth() * dpi, szi.getHeight() * dpi));};P.getSize = function() {return(this.size);};P.setSize = function(v) {this.size = v;return(this);};P.getOrientation = function() {return(this.orientation);};P.setOrientation = function(v) {this.orientation = v;return(this);};var P2 = P;CapexUtilPaperConfiguration.Size = function() {this.width = null;this.height = null;};var P = CapexUtilPaperConfiguration.Size.prototype;P._t = {"CapexUtilPaperConfiguration.Size" : true};CapexUtilPaperConfiguration.Size.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilPaperConfiguration.Size"] === true);};CapexUtilPaperConfiguration.Size.NEW = function() {var v = new CapexUtilPaperConfiguration.Size();return(v.CTOR());};P.CTOR = function() {this.height = 0.0;this.width = 0.0;this.width = 0.0;this.height = 0.0;return(this);};CapexUtilPaperConfiguration.Size.NEWWithDoubleAndDouble = function(w, h) {var v = new CapexUtilPaperConfiguration.Size();return(v.CTORWithDoubleAndDouble(w, h));};P.CTORWithDoubleAndDouble = function(w, h) {this.height = 0.0;this.width = 0.0;this.width = w;this.height = h;return(this);};P.getHeight = function() {return(this.height);};P.getWidth = function() {return(this.width);};P = P2;P2 = null;var CapexUtilPaperOrientation = function() {this.value = null;};var P = CapexUtilPaperOrientation.prototype;CapexUtilPaperOrientation.LANDSCAPE = 0;CapexUtilPaperOrientation.PORTRAIT = 1;CapexUtilPaperOrientation.COUNT = 2;P._t = {"CapexUtilPaperOrientation" : true,"CapeStringObject" : true};CapexUtilPaperOrientation.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilPaperOrientation"] === true);};CapexUtilPaperOrientation.NEW = function() {var v = new CapexUtilPaperOrientation();return(v.CTOR());};P.CTOR = function() {this.value = 0;return(this);};CapexUtilPaperOrientation.getAll = function() {var v = new Array();var n = 0;for(n = 0 ; n < CapexUtilPaperOrientation.COUNT ; n++) {CapeVector.append(v, CapexUtilPaperOrientation.forValue(n));}return(v);};CapexUtilPaperOrientation.matches = function(oo, value) {if(oo != null && oo.getValue() === value) {return(true);}return(false);};CapexUtilPaperOrientation.forValue = function(value) {return(CapexUtilPaperOrientation.NEW().setValue(value));};P.toString = function() {if(this.value === CapexUtilPaperOrientation.LANDSCAPE) {return("Landscape");}if(this.value === CapexUtilPaperOrientation.PORTRAIT) {return("Portrait");}return("Unknown orientation");};P.getValue = function() {return(this.value);};P.setValue = function(v) {this.value = v;return(this);};var CapexUtilPaperSize = function() {this.value = null;};var P = CapexUtilPaperSize.prototype;CapexUtilPaperSize.LETTER = 0;CapexUtilPaperSize.LEGAL = 1;CapexUtilPaperSize.A3 = 2;CapexUtilPaperSize.A4 = 3;CapexUtilPaperSize.A5 = 4;CapexUtilPaperSize.B4 = 5;CapexUtilPaperSize.B5 = 6;CapexUtilPaperSize.COUNT = 7;P._t = {"CapexUtilPaperSize" : true,"CapeStringObject" : true};CapexUtilPaperSize.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilPaperSize"] === true);};CapexUtilPaperSize.NEW = function() {var v = new CapexUtilPaperSize();return(v.CTOR());};P.CTOR = function() {this.value = 0;return(this);};CapexUtilPaperSize.getAll = function() {var v = new Array();var n = 0;for(n = 0 ; n < CapexUtilPaperSize.COUNT ; n++) {CapeVector.append(v, CapexUtilPaperSize.forValue(n));}return(v);};CapexUtilPaperSize.matches = function(sz, value) {if(sz != null && sz.getValue() === value) {return(true);}return(false);};CapexUtilPaperSize.forValue = function(value) {return(CapexUtilPaperSize.NEW().setValue(value));};P.toString = function() {if(this.value === CapexUtilPaperSize.LETTER) {return("US Letter");}if(this.value === CapexUtilPaperSize.LEGAL) {return("US Legal");}if(this.value === CapexUtilPaperSize.A3) {return("A3");}if(this.value === CapexUtilPaperSize.A4) {return("A4");}if(this.value === CapexUtilPaperSize.A5) {return("A5");}if(this.value === CapexUtilPaperSize.B4) {return("B4");}if(this.value === CapexUtilPaperSize.B5) {return("B5");}return("Unknown paper size");};P.getValue = function() {return(this.value);};P.setValue = function(v) {this.value = v;return(this);};var CapexUtilSimpleConfigFile = function() {this.data = null;this.mapData = null;this.file = null;};var P = CapexUtilSimpleConfigFile.prototype;P._t = {"CapexUtilSimpleConfigFile" : true};CapexUtilSimpleConfigFile.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilSimpleConfigFile"] === true);};CapexUtilSimpleConfigFile.forFile = function(file) {var v = CapexUtilSimpleConfigFile.NEW();if(!v.read(file)) {return(null);}return(v);};CapexUtilSimpleConfigFile.forMap = function(map) {var v = CapexUtilSimpleConfigFile.NEW();v.setDataAsMap(map);return(v);};CapexUtilSimpleConfigFile.readFileAsMap = function(file) {var cf = CapexUtilSimpleConfigFile.forFile(file);if(!(cf != null)) {return(null);}return(cf.getDataAsMap());};CapexUtilSimpleConfigFile.NEW = function() {var v = new CapexUtilSimpleConfigFile();return(v.CTOR());};P.CTOR = function() {this.file = null;this.mapData = null;this.data = null;this.data = CapeKeyValueList.NEW();return(this);};P.getFile = function() {return(this.file);};P.getRelativeFile = function(fileName) {if(!(this.file != null)) {return(null);}if(!(fileName != null)) {return(null);}var p = this.file.getParent();if(!(p != null)) {return(null);}return(p.entry(fileName));};P.clear = function() {this.data.clear();this.mapData = null;};P.setDataAsMap = function(map) {this.clear();var keys = map.iterateKeys();while(keys != null) {var key = keys.next();if(!(key != null)) {break;}this.data.addKAndV(key, map.getString(key, null));}return(this);};P.getDataAsMap = function() {if(!(this.mapData != null)) {this.mapData = CapeDynamicMap.NEW();var it = this.data.iterate();while(it != null) {var kvp = it.next();if(!(kvp != null)) {break;}this.mapData.setStringAndObject(kvp.key, kvp.value);}}return(this.mapData);};P.getDynamicMapValue = function(key, defval) {var str = this.getStringValue(key, null);if(!(str != null)) {return(defval);}var tv = CapeJSONParser.parseString(str);var v = null;if(CapeDynamicMap.IS_INSTANCE(tv)) {v = tv;}if(!(v != null)) {return(defval);}return(v);};P.getDynamicVectorValue = function(key, defval) {var str = this.getStringValue(key, null);if(!(str != null)) {return(defval);}var tv = CapeJSONParser.parseString(str);var v = null;if(CapeDynamicVector.IS_INSTANCE(tv)) {v = tv;}if(!(v != null)) {return(defval);}return(v);};P.getStringValue = function(key, defval) {var map = this.getDataAsMap();if(!(map != null)) {return(defval);}var v = map.getString(key, null);if(!(v != null)) {return(defval);}if(CapeString.startsWithWithStringAndStringAndSignedInteger(v, "\"\"\"\n", 0) && CapeString.endsWithWithStringAndString(v, "\n\"\"\"")) {v = CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(v, 4, CapeString.getLength(v) - 8);}return(v);};P.getIntegerValue = function(key, defval) {var map = this.getDataAsMap();if(!(map != null)) {return(defval);}return(map.getInteger(key, defval));};P.getDoubleValue = function(key, defval) {var map = this.getDataAsMap();if(!(map != null)) {return(defval);}return(map.getDouble(key, defval));};P.getBooleanValue = function(key, defval) {var map = this.getDataAsMap();if(!(map != null)) {return(defval);}return(map.getBoolean(key, defval));};P.getFileValue = function(key, defval) {var v = this.getRelativeFile(this.getStringValue(key, null));if(!(v != null)) {return(defval);}return(v);};P.iterate = function() {if(!(this.data != null)) {return(null);}return(this.data.iterate());};P.read = function(file) {if(!(file != null)) {return(false);}var reader = file.read();if(!(reader != null)) {return(false);}var ins = CapePrintReader.forReader(reader);var line = null;var tag = null;var lineBuffer = null;var terminator = null;while((line = ins.readLine()) != null) {if(lineBuffer != null) {lineBuffer.appendString(line);if(line === terminator) {line = lineBuffer.toString();lineBuffer = null;terminator = null;}else {lineBuffer.appendCharacter('\n');continue;}}line = CapeString.strip(line);if(CapeString.isEmpty(line) || CapeString.startsWithWithStringAndStringAndSignedInteger(line, "#", 0)) {continue;}if(CapeString.endsWithWithStringAndString(line, "{")) {if(CapeString.indexOfWithStringAndCharacterAndSignedInteger(line, ':', 0) < 0) {if(!(tag != null)) {tag = CapeString.strip(CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(line, 0, CapeString.getLength(line) - 1));}continue;}else {lineBuffer = CapeStringBuilder.NEW();lineBuffer.appendString(line);lineBuffer.appendCharacter('\n');terminator = "}";continue;}}if(CapeString.endsWithWithStringAndString(line, "[")) {lineBuffer = CapeStringBuilder.NEW();lineBuffer.appendString(line);lineBuffer.appendCharacter('\n');terminator = "]";continue;}if(CapeString.endsWithWithStringAndString(line, "\"\"\"")) {lineBuffer = CapeStringBuilder.NEW();lineBuffer.appendString(line);lineBuffer.appendCharacter('\n');terminator = "\"\"\"";continue;}if(tag != null && line === "}") {tag = null;continue;}var sp = CapeString.split(line, ':', 2);if(!(sp != null)) {continue;}var key = CapeString.strip(CapeVector.get(sp, 0));var val = CapeString.strip(CapeVector.get(sp, 1));if(CapeString.startsWithWithStringAndStringAndSignedInteger(val, "\"", 0) && CapeString.endsWithWithStringAndString(val, "\"")) {val = CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(val, 1, CapeString.getLength(val) - 2);}if(CapeString.isEmpty(key)) {continue;}if(tag != null) {key = key + "[" + tag + "]";}this.data.addKAndV(key, val);}this.file = file;reader.close();return(true);};P.write = function(outfile) {if(!(outfile != null)) {return(false);}if(!(this.data != null)) {return(false);}var wr = outfile.write();if(!(wr != null)) {return(false);}var os = CapePrintWriterWrapper.forWriter(wr);if(os != null) {var it = this.data.iterate();while(it != null) {var kvp = it.next();if(!(kvp != null)) {break;}os.println((kvp.key) + ": " + (kvp.value));}}wr.close();return(true);};var CapexUtilVector2 = function() {this.x = null;this.y = null;};var P = CapexUtilVector2.prototype;P._t = {"CapexUtilVector2" : true};CapexUtilVector2.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilVector2"] === true);};CapexUtilVector2.NEW = function() {var v = new CapexUtilVector2();return(v.CTOR());};P.CTOR = function() {this.y = 0.0;this.x = 0.0;return(this);};CapexUtilVector2.create = function(x, y) {var v = CapexUtilVector2.NEW();v.x = x;v.y = y;return(v);};P.add = function(b) {this.x += b.x;this.y += b.y;return(this);};P.subtract = function(b) {this.x -= b.x;this.y -= b.y;return(this);};P.multiply = function(b) {this.x *= b.x;this.y *= b.y;return(this);};P.multiplyScalar = function(a) {this.x += a;this.y += a;return(this);};P.distance = function(b) {var dist = (this.y - b.y) * (this.y - b.y) + (this.x - b.x) * (this.x - b.x);return(CapeMath.sqrt(dist));};P.getLength = function() {return(CapeMath.sqrt(this.x * this.x + this.y * this.y));};var CapexUtilVector3 = function() {this.x = null;this.y = null;this.z = null;};var P = CapexUtilVector3.prototype;P._t = {"CapexUtilVector3" : true};CapexUtilVector3.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilVector3"] === true);};CapexUtilVector3.NEW = function() {var v = new CapexUtilVector3();return(v.CTOR());};P.CTOR = function() {this.z = 0.0;this.y = 0.0;this.x = 0.0;return(this);};CapexUtilVector3.create = function(x, y, z) {var v = CapexUtilVector3.NEW();v.x = x;v.y = y;v.z = z;return(v);};P.add = function(b) {this.x += b.x;this.y += b.y;this.z += b.z;return(this);};P.subtract = function(b) {this.x -= b.x;this.y -= b.y;this.z -= b.z;return(this);};P.multiply = function(b) {this.x *= b.x;this.y *= b.y;this.z *= b.z;return(this);};P.multiplyScalar = function(a) {this.x *= a;this.y *= a;this.z *= a;return(this);};P.distance = function(b) {var dist = (this.y - b.y) * (this.y - b.y) + (this.x - b.x) * (this.x - b.x) + (this.z - b.z) * (this.z - b.z);return(CapeMath.sqrt(dist));};P.getLength = function() {return(CapeMath.sqrt(this.x * this.x + this.y * this.y + this.z * this.z));};var CapexUtilZipReader = function() {};var P = CapexUtilZipReader.prototype;P._t = {"CapexUtilZipReader" : true};CapexUtilZipReader.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilZipReader"] === true);};CapexUtilZipReader.NEW = function() {var v = new CapexUtilZipReader();return(v.CTOR());};P.CTOR = function() {return(this);};CapexUtilZipReader.forFile = function(file) {return(null);};CapexUtilZipReader.extractZipFileToDirectory = function(zipFile, destDir, listener) {if(!(zipFile != null)) {return(false);}if(!(destDir != null)) {return(false);}var zf = CapexUtilZipReader.forFile(zipFile);if(!(zf != null)) {return(false);}if(!destDir.isDirectory()) {destDir.createDirectoryRecursive();}if(!destDir.isDirectory()) {zf.close();return(false);}var array = zf.getEntries();if(array != null) {var n = 0;var m = array.length;for(n = 0 ; n < m ; n++) {var entry = array[n];if(entry != null) {var ename = entry.getName();if(CapeString.isEmpty(ename)) {continue;}var dd = destDir;ename = CapeString.replaceStringAndCharacterAndCharacter(ename, '\\', '/');var array2 = CapeString.split(ename, '/', 0);if(array2 != null) {var n2 = 0;var m2 = array2.length;for(n2 = 0 ; n2 < m2 ; n2++) {var comp = array2[n2];if(comp != null) {if(comp === "." || comp === "..") {continue;}dd = dd.entry(comp);}}}if(listener != null) {listener(dd);}if(!entry.writeToFile(dd)) {zf.close();return(false);}}}}zf.close();return(true);};P.getEntries = function() {};P.close = function() {};var CapexUtilZipReaderEntry = function() {this.name = null;this.compressedSize = null;this.uncompressedSize = null;this.isDirectory = null;};var P = CapexUtilZipReaderEntry.prototype;P._t = {"CapexUtilZipReaderEntry" : true};CapexUtilZipReaderEntry.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilZipReaderEntry"] === true);};CapexUtilZipReaderEntry.NEW = function() {var v = new CapexUtilZipReaderEntry();return(v.CTOR());};P.CTOR = function() {this.isDirectory = false;this.uncompressedSize = 0;this.compressedSize = 0;this.name = null;return(this);};P.getName = function() {return(this.name);};P.setName = function(newName) {this.name = CapeString.replaceStringAndCharacterAndCharacter(newName, '\\', '/');if(CapeString.endsWithWithStringAndString(this.name, "/")) {this.isDirectory = true;this.name = CapeString.getSubStringWithStringAndSignedIntegerAndSignedInteger(this.name, 0, CapeString.getLength(this.name) - 1);}return(this);};P.getContentReader = function() {return(null);};P.writeToFile = function(file) {if(!(file != null)) {return(false);}if(this.getIsDirectory()) {return(file.createDirectoryRecursive());}var reader = this.getContentReader();if(!(reader != null)) {return(false);}var fp = file.getParent();if(fp != null) {fp.createDirectoryRecursive();}var writer = file.write();if(!(writer != null)) {if(CapeClosable.IS_INSTANCE(reader)) {reader.close();}return(false);}var buf = new ArrayBuffer(4096 * 4);var v = true;var n = 0;while((n = reader.read(buf)) > 0) {var nr = writer.write(buf, n);if(nr !== n) {v = false;break;}}if(!v) {file.remove();}if(reader != null && CapeClosable.IS_INSTANCE(reader)) {reader.close();}if(writer != null && CapeClosable.IS_INSTANCE(writer)) {writer.close();}return(v);};P.writeToDir = function(dir, fullPath, overwrite) {if(!(dir != null)) {return(null);}if(!(this.name != null)) {return(null);}var path = null;if(fullPath === false) {var nn = null;var r = CapeString.lastIndexOfWithStringAndCharacterAndSignedInteger(this.name, '/', -1);if(r < 1) {nn = this.name;}else {nn = CapeString.subStringWithStringAndSignedInteger(this.name, r + 1);}if(nn == null || CapeString.getLength(nn) < 1) {return(null);}path = dir.entry(nn);}else {path = dir;var array = CapeString.split(this.name, '/', 0);if(array != null) {var n = 0;var m = array.length;for(n = 0 ; n < m ; n++) {var x = array[n];if(x != null) {if(x != null && CapeString.getLength(x) > 0) {path = path.entry(x);}}}}var dd = path.getParent();if(!dd.isDirectory()) {dd.createDirectoryRecursive();}if(!dd.isDirectory()) {return(null);}}if(overwrite === false) {if(path.exists()) {return(null);}}if(!this.writeToFile(path)) {return(null);}return(path);};P.getCompressedSize = function() {return(this.compressedSize);};P.setCompressedSize = function(v) {this.compressedSize = v;return(this);};P.getUncompressedSize = function() {return(this.uncompressedSize);};P.setUncompressedSize = function(v) {this.uncompressedSize = v;return(this);};P.getIsDirectory = function() {return(this.isDirectory);};P.setIsDirectory = function(v) {this.isDirectory = v;return(this);};var CapexUtilZipWriter = function() {};var P = CapexUtilZipWriter.prototype;P._t = {"CapexUtilZipWriter" : true};CapexUtilZipWriter.IS_INSTANCE = function(o) {return(o != null && o._t != null && o._t["CapexUtilZipWriter"] === true);};CapexUtilZipWriter.NEW = function() {var v = new CapexUtilZipWriter();return(v.CTOR());};P.CTOR = function() {return(this);};CapexUtilZipWriter.forOutputFile = function(file) {return(null);};P.addFile = function(file, filename) {};P.close = function() {};